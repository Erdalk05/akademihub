"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/dashboard/stats/route";
exports.ids = ["app/api/dashboard/stats/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("punycode");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fdashboard%2Fstats%2Froute&page=%2Fapi%2Fdashboard%2Fstats%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fdashboard%2Fstats%2Froute.ts&appDir=%2FUsers%2Ferdalkiziroglu%2Fyeni%20akdemihubiai%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Ferdalkiziroglu%2Fyeni%20akdemihubiai&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fdashboard%2Fstats%2Froute&page=%2Fapi%2Fdashboard%2Fstats%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fdashboard%2Fstats%2Froute.ts&appDir=%2FUsers%2Ferdalkiziroglu%2Fyeni%20akdemihubiai%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Ferdalkiziroglu%2Fyeni%20akdemihubiai&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_erdalkiziroglu_yeni_akdemihubiai_app_api_dashboard_stats_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/dashboard/stats/route.ts */ \"(rsc)/./app/api/dashboard/stats/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/dashboard/stats/route\",\n        pathname: \"/api/dashboard/stats\",\n        filename: \"route\",\n        bundlePath: \"app/api/dashboard/stats/route\"\n    },\n    resolvedPagePath: \"/Users/erdalkiziroglu/yeni akdemihubiai/app/api/dashboard/stats/route.ts\",\n    nextConfigOutput,\n    userland: _Users_erdalkiziroglu_yeni_akdemihubiai_app_api_dashboard_stats_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/dashboard/stats/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZkYXNoYm9hcmQlMkZzdGF0cyUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGZGFzaGJvYXJkJTJGc3RhdHMlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZkYXNoYm9hcmQlMkZzdGF0cyUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRmVyZGFsa2l6aXJvZ2x1JTJGeWVuaSUyMGFrZGVtaWh1YmlhaSUyRmFwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9JTJGVXNlcnMlMkZlcmRhbGtpemlyb2dsdSUyRnllbmklMjBha2RlbWlodWJpYWkmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQ3dCO0FBQ3JHO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnSEFBbUI7QUFDM0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsaUVBQWlFO0FBQ3pFO0FBQ0E7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDdUg7O0FBRXZIIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWthZGVtaWh1Yi8/ZDA5OSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIvVXNlcnMvZXJkYWxraXppcm9nbHUveWVuaSBha2RlbWlodWJpYWkvYXBwL2FwaS9kYXNoYm9hcmQvc3RhdHMvcm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2Rhc2hib2FyZC9zdGF0cy9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2Rhc2hib2FyZC9zdGF0c1wiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvZGFzaGJvYXJkL3N0YXRzL3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiL1VzZXJzL2VyZGFsa2l6aXJvZ2x1L3llbmkgYWtkZW1paHViaWFpL2FwcC9hcGkvZGFzaGJvYXJkL3N0YXRzL3JvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS9kYXNoYm9hcmQvc3RhdHMvcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fdashboard%2Fstats%2Froute&page=%2Fapi%2Fdashboard%2Fstats%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fdashboard%2Fstats%2Froute.ts&appDir=%2FUsers%2Ferdalkiziroglu%2Fyeni%20akdemihubiai%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Ferdalkiziroglu%2Fyeni%20akdemihubiai&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/dashboard/stats/route.ts":
/*!******************************************!*\
  !*** ./app/api/dashboard/stats/route.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   dynamic: () => (/* binding */ dynamic),\n/* harmony export */   runtime: () => (/* binding */ runtime)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_supabase_server__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/supabase/server */ \"(rsc)/./lib/supabase/server.ts\");\n\n\nconst runtime = \"nodejs\";\nconst dynamic = \"force-dynamic\";\n/**\n * Akademik yılın başlangıç ve bitiş tarihlerini hesapla\n * Örn: \"2024-2025\" → { start: \"2024-09-01\", end: \"2025-08-31\" }\n */ function getAcademicYearDates(academicYear) {\n    const [startYear, endYear] = academicYear.split(\"-\").map(Number);\n    // Akademik yıl: Eylül 1 - Ağustos 31\n    const start = new Date(startYear, 8, 1, 0, 0, 0); // Eylül 1\n    const end = new Date(endYear, 7, 31, 23, 59, 59); // Ağustos 31\n    return {\n        start: start.toISOString(),\n        end: end.toISOString()\n    };\n}\n/**\n * GET /api/dashboard/stats\n * Tüm dashboard verilerini tek seferde döndürür\n * PERFORMANS OPTIMIZATION: Paralel fetch + cache\n * \n * Query Params:\n * - academicYear: \"2024-2025\" formatında akademik yıl\n */ async function GET(req) {\n    try {\n        const supabase = (0,_lib_supabase_server__WEBPACK_IMPORTED_MODULE_1__.getServiceRoleClient)();\n        const { searchParams } = new URL(req.url);\n        // Akademik yıl parametresi\n        const academicYear = searchParams.get(\"academicYear\") || getCurrentAcademicYear();\n        const { start: yearStart, end: yearEnd } = getAcademicYearDates(academicYear);\n        const now = new Date();\n        const todayStart = new Date(now.getFullYear(), now.getMonth(), now.getDate(), 0, 0, 0).toISOString();\n        const todayEnd = new Date(now.getFullYear(), now.getMonth(), now.getDate(), 23, 59, 59).toISOString();\n        // PARALEL FETCH (Hız x5!)\n        // Öğrencileri kayıt tarihine göre filtrele\n        const [studentsResult, installmentsResult] = await Promise.all([\n            supabase.from(\"students\").select(\"id, created_at\"),\n            supabase.from(\"finance_installments\").select(\"*\")\n        ]);\n        // Helper: Mevcut akademik yılı hesapla\n        function getCurrentAcademicYear() {\n            const now = new Date();\n            const month = now.getMonth();\n            const year = now.getFullYear();\n            return month >= 8 ? `${year}-${year + 1}` : `${year - 1}-${year}`;\n        }\n        if (studentsResult.error) throw studentsResult.error;\n        if (installmentsResult.error) throw installmentsResult.error;\n        const allStudents = studentsResult.data || [];\n        const allInstallments = installmentsResult.data || [];\n        // AKADEMİK YILA GÖRE FİLTRELEME\n        // Öğrencileri created_at tarihine göre filtrele\n        const students = allStudents.filter((s)=>{\n            if (s.created_at) {\n                return s.created_at >= yearStart && s.created_at <= yearEnd;\n            }\n            return true;\n        });\n        // Sadece bu yıla ait öğrencilerin ID'lerini al\n        const studentIds = new Set(students.map((s)=>s.id));\n        // Taksitleri filtrele: sadece bu yıla ait öğrencilerin taksitleri\n        // VE taksit tarihi bu akademik yıl içinde olanlar\n        const installments = allInstallments.filter((inst)=>{\n            // Önce öğrenci ID'sine göre filtrele\n            if (!studentIds.has(inst.student_id)) return false;\n            // Taksit tarihi bu yıl içinde mi kontrol et\n            if (inst.due_date) {\n                return inst.due_date >= yearStart && inst.due_date <= yearEnd;\n            }\n            return true;\n        });\n        // KPI HESAPLAMALARI (Seçilen yıla ait verilerden)\n        const activeStudents = students.length;\n        // Toplam ödenen tutarı installments'tan hesapla\n        const paidInstallments = installments.filter((inst)=>inst.is_paid);\n        const totalRevenue = paidInstallments.reduce((sum, inst)=>sum + (inst.paid_amount || inst.amount || 0), 0);\n        // Toplam sözleşme tutarı\n        const totalContract = installments.reduce((sum, inst)=>sum + (inst.amount || 0), 0);\n        const paymentRate = totalContract > 0 ? (totalRevenue / totalContract * 100).toFixed(1) : \"0\";\n        // Borçlu öğrenci sayısı (ödenmemiş taksiti olan)\n        const unpaidInstallments = installments.filter((inst)=>!inst.is_paid);\n        const debtorStudentIds = new Set(unpaidInstallments.map((inst)=>inst.student_id));\n        const debtorStudents = debtorStudentIds.size;\n        // Toplam alacak (borç)\n        const totalDebt = unpaidInstallments.reduce((sum, inst)=>sum + (inst.amount || 0), 0);\n        // BUGÜNKÜ TAHSİLAT\n        const todayPayments = installments.filter((inst)=>{\n            if (!inst.is_paid || !inst.paid_at) return false;\n            return inst.paid_at >= todayStart && inst.paid_at <= todayEnd;\n        });\n        const todayCollected = todayPayments.reduce((sum, p)=>sum + (p.paid_amount || 0), 0);\n        const todayPaymentCount = todayPayments.length;\n        const todayStudentCount = new Set(todayPayments.map((p)=>p.student_id)).size;\n        // BU AY TAHSİLAT\n        const currentMonth = new Date();\n        const monthStart = new Date(currentMonth.getFullYear(), currentMonth.getMonth(), 1).toISOString();\n        const monthEnd = new Date(currentMonth.getFullYear(), currentMonth.getMonth() + 1, 0, 23, 59, 59).toISOString();\n        const monthlyPayments = installments.filter((inst)=>{\n            if (!inst.is_paid || !inst.paid_at) return false;\n            return inst.paid_at >= monthStart && inst.paid_at <= monthEnd;\n        });\n        const monthlyCollection = monthlyPayments.reduce((sum, p)=>sum + (p.paid_amount || 0), 0);\n        // BEKLEYEN ÖDEMELER\n        const overdue = unpaidInstallments.filter((inst)=>inst.due_date && new Date(inst.due_date) < now);\n        const overdueAmount = overdue.reduce((sum, i)=>sum + (i.amount || 0), 0);\n        const overdueCount = overdue.length;\n        // 6 AYLIK FİNANS DATA\n        const monthlyData = [];\n        const monthNames = [\n            \"Oca\",\n            \"Şub\",\n            \"Mar\",\n            \"Nis\",\n            \"May\",\n            \"Haz\",\n            \"Tem\",\n            \"Ağu\",\n            \"Eyl\",\n            \"Eki\",\n            \"Kas\",\n            \"Ara\"\n        ];\n        for(let i = 5; i >= 0; i--){\n            const d = new Date();\n            d.setMonth(d.getMonth() - i);\n            const monthKey = `${d.getFullYear()}-${String(d.getMonth() + 1).padStart(2, \"0\")}`;\n            const monthPayments = installments.filter((inst)=>{\n                if (!inst.is_paid || !inst.paid_at) return false;\n                const paidDate = new Date(inst.paid_at);\n                return `${paidDate.getFullYear()}-${String(paidDate.getMonth() + 1).padStart(2, \"0\")}` === monthKey;\n            });\n            const income = monthPayments.reduce((sum, p)=>sum + (p.paid_amount || 0), 0);\n            monthlyData.push({\n                month: monthNames[d.getMonth()],\n                income,\n                expense: 0,\n                net: income\n            });\n        }\n        // RESPONSE\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            data: {\n                academicYear,\n                kpi: {\n                    activeStudents,\n                    totalRevenue,\n                    paymentRate: parseFloat(paymentRate),\n                    debtorStudents,\n                    totalDebt,\n                    monthlyCollection\n                },\n                todayCollection: {\n                    totalCollected: todayCollected,\n                    paymentCount: todayPaymentCount,\n                    studentCount: todayStudentCount,\n                    dailyTarget: 16667,\n                    targetPercentage: todayCollected / 16667 * 100\n                },\n                pendingPayments: {\n                    overdueAmount,\n                    overdueCount,\n                    overdueStudents: new Set(overdue.map((i)=>i.student_id)).size\n                },\n                monthlyFinance: monthlyData\n            }\n        }, {\n            status: 200,\n            headers: {\n                \"Cache-Control\": \"public, s-maxage=60, stale-while-revalidate=120\"\n            }\n        });\n    } catch (error) {\n        console.error(\"Dashboard stats error:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            error: error.message || \"Internal server error\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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NUV5QixZQUFZVSxJQUFJLENBQUM7Z0JBQ2Y1RCxPQUFPbUQsVUFBVSxDQUFDQyxFQUFFN0QsUUFBUSxHQUFHO2dCQUMvQm9FO2dCQUNBRSxTQUFTO2dCQUNUQyxLQUFLSDtZQUNQO1FBQ0Y7UUFFQSxXQUFXO1FBQ1gsT0FBT2hHLHFEQUFZQSxDQUFDb0csSUFBSSxDQUFDO1lBQ3ZCQyxTQUFTO1lBQ1Q1RCxNQUFNO2dCQUNKcEM7Z0JBQ0FpRyxLQUFLO29CQUNIL0M7b0JBQ0FJO29CQUNBTSxhQUFhc0MsV0FBV3RDO29CQUN4Qkk7b0JBQ0FFO29CQUNBVztnQkFDRjtnQkFDQXNCLGlCQUFpQjtvQkFDZkMsZ0JBQWdCL0I7b0JBQ2hCZ0MsY0FBYzlCO29CQUNkK0IsY0FBYzlCO29CQUNkK0IsYUFBYTtvQkFDYkMsa0JBQWtCLGlCQUFrQixRQUFTO2dCQUMvQztnQkFDQUMsaUJBQWlCO29CQUNmMUI7b0JBQ0FFO29CQUNBeUIsaUJBQWlCLElBQUkvRCxJQUFJbUMsUUFBUTFFLEdBQUcsQ0FBQzRFLENBQUFBLElBQUtBLEVBQUVoQyxVQUFVLEdBQUdpQixJQUFJO2dCQUMvRDtnQkFDQTBDLGdCQUFnQnpCO1lBQ2xCO1FBQ0YsR0FBRztZQUNEMEIsUUFBUTtZQUNSQyxTQUFTO2dCQUNQLGlCQUFpQjtZQUNuQjtRQUNGO0lBRUYsRUFBRSxPQUFPM0UsT0FBWTtRQUNuQjRFLFFBQVE1RSxLQUFLLENBQUMsMEJBQTBCQTtRQUN4QyxPQUFPdkMscURBQVlBLENBQUNvRyxJQUFJLENBQ3RCO1lBQUVDLFNBQVM7WUFBTzlELE9BQU9BLE1BQU02RSxPQUFPLElBQUk7UUFBd0IsR0FDbEU7WUFBRUgsUUFBUTtRQUFJO0lBRWxCO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ha2FkZW1paHViLy4vYXBwL2FwaS9kYXNoYm9hcmQvc3RhdHMvcm91dGUudHM/YzY2ZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVxdWVzdCwgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInO1xuaW1wb3J0IHsgZ2V0U2VydmljZVJvbGVDbGllbnQgfSBmcm9tICdAL2xpYi9zdXBhYmFzZS9zZXJ2ZXInO1xuXG5leHBvcnQgY29uc3QgcnVudGltZSA9ICdub2RlanMnO1xuZXhwb3J0IGNvbnN0IGR5bmFtaWMgPSAnZm9yY2UtZHluYW1pYyc7XG5cbi8qKlxuICogQWthZGVtaWsgecSxbMSxbiBiYcWfbGFuZ8Sxw6cgdmUgYml0acWfIHRhcmlobGVyaW5pIGhlc2FwbGFcbiAqIMOWcm46IFwiMjAyNC0yMDI1XCIg4oaSIHsgc3RhcnQ6IFwiMjAyNC0wOS0wMVwiLCBlbmQ6IFwiMjAyNS0wOC0zMVwiIH1cbiAqL1xuZnVuY3Rpb24gZ2V0QWNhZGVtaWNZZWFyRGF0ZXMoYWNhZGVtaWNZZWFyOiBzdHJpbmcpIHtcbiAgY29uc3QgW3N0YXJ0WWVhciwgZW5kWWVhcl0gPSBhY2FkZW1pY1llYXIuc3BsaXQoJy0nKS5tYXAoTnVtYmVyKTtcbiAgXG4gIC8vIEFrYWRlbWlrIHnEsWw6IEV5bMO8bCAxIC0gQcSfdXN0b3MgMzFcbiAgY29uc3Qgc3RhcnQgPSBuZXcgRGF0ZShzdGFydFllYXIsIDgsIDEsIDAsIDAsIDApOyAvLyBFeWzDvGwgMVxuICBjb25zdCBlbmQgPSBuZXcgRGF0ZShlbmRZZWFyLCA3LCAzMSwgMjMsIDU5LCA1OSk7IC8vIEHEn3VzdG9zIDMxXG4gIFxuICByZXR1cm4ge1xuICAgIHN0YXJ0OiBzdGFydC50b0lTT1N0cmluZygpLFxuICAgIGVuZDogZW5kLnRvSVNPU3RyaW5nKClcbiAgfTtcbn1cblxuLyoqXG4gKiBHRVQgL2FwaS9kYXNoYm9hcmQvc3RhdHNcbiAqIFTDvG0gZGFzaGJvYXJkIHZlcmlsZXJpbmkgdGVrIHNlZmVyZGUgZMO2bmTDvHLDvHJcbiAqIFBFUkZPUk1BTlMgT1BUSU1JWkFUSU9OOiBQYXJhbGVsIGZldGNoICsgY2FjaGVcbiAqIFxuICogUXVlcnkgUGFyYW1zOlxuICogLSBhY2FkZW1pY1llYXI6IFwiMjAyNC0yMDI1XCIgZm9ybWF0xLFuZGEgYWthZGVtaWsgecSxbFxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR0VUKHJlcTogTmV4dFJlcXVlc3QpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBzdXBhYmFzZSA9IGdldFNlcnZpY2VSb2xlQ2xpZW50KCk7XG4gICAgY29uc3QgeyBzZWFyY2hQYXJhbXMgfSA9IG5ldyBVUkwocmVxLnVybCk7XG4gICAgXG4gICAgLy8gQWthZGVtaWsgecSxbCBwYXJhbWV0cmVzaVxuICAgIGNvbnN0IGFjYWRlbWljWWVhciA9IHNlYXJjaFBhcmFtcy5nZXQoJ2FjYWRlbWljWWVhcicpIHx8IGdldEN1cnJlbnRBY2FkZW1pY1llYXIoKTtcbiAgICBjb25zdCB7IHN0YXJ0OiB5ZWFyU3RhcnQsIGVuZDogeWVhckVuZCB9ID0gZ2V0QWNhZGVtaWNZZWFyRGF0ZXMoYWNhZGVtaWNZZWFyKTtcbiAgICBcbiAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xuICAgIGNvbnN0IHRvZGF5U3RhcnQgPSBuZXcgRGF0ZShub3cuZ2V0RnVsbFllYXIoKSwgbm93LmdldE1vbnRoKCksIG5vdy5nZXREYXRlKCksIDAsIDAsIDApLnRvSVNPU3RyaW5nKCk7XG4gICAgY29uc3QgdG9kYXlFbmQgPSBuZXcgRGF0ZShub3cuZ2V0RnVsbFllYXIoKSwgbm93LmdldE1vbnRoKCksIG5vdy5nZXREYXRlKCksIDIzLCA1OSwgNTkpLnRvSVNPU3RyaW5nKCk7XG5cbiAgICAvLyBQQVJBTEVMIEZFVENIIChIxLF6IHg1ISlcbiAgICAvLyDDlsSfcmVuY2lsZXJpIGthecSxdCB0YXJpaGluZSBnw7ZyZSBmaWx0cmVsZVxuICAgIGNvbnN0IFtcbiAgICAgIHN0dWRlbnRzUmVzdWx0LFxuICAgICAgaW5zdGFsbG1lbnRzUmVzdWx0XG4gICAgXSA9IGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICAgIHN1cGFiYXNlLmZyb20oJ3N0dWRlbnRzJykuc2VsZWN0KCdpZCwgY3JlYXRlZF9hdCcpLFxuICAgICAgc3VwYWJhc2UuZnJvbSgnZmluYW5jZV9pbnN0YWxsbWVudHMnKS5zZWxlY3QoJyonKVxuICAgIF0pO1xuXG4vLyBIZWxwZXI6IE1ldmN1dCBha2FkZW1payB5xLFsxLEgaGVzYXBsYVxuZnVuY3Rpb24gZ2V0Q3VycmVudEFjYWRlbWljWWVhcigpIHtcbiAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcbiAgY29uc3QgbW9udGggPSBub3cuZ2V0TW9udGgoKTtcbiAgY29uc3QgeWVhciA9IG5vdy5nZXRGdWxsWWVhcigpO1xuICByZXR1cm4gbW9udGggPj0gOCA/IGAke3llYXJ9LSR7eWVhciArIDF9YCA6IGAke3llYXIgLSAxfS0ke3llYXJ9YDtcbn1cblxuICAgIGlmIChzdHVkZW50c1Jlc3VsdC5lcnJvcikgdGhyb3cgc3R1ZGVudHNSZXN1bHQuZXJyb3I7XG4gICAgaWYgKGluc3RhbGxtZW50c1Jlc3VsdC5lcnJvcikgdGhyb3cgaW5zdGFsbG1lbnRzUmVzdWx0LmVycm9yO1xuXG4gICAgY29uc3QgYWxsU3R1ZGVudHMgPSBzdHVkZW50c1Jlc3VsdC5kYXRhIHx8IFtdO1xuICAgIGNvbnN0IGFsbEluc3RhbGxtZW50cyA9IGluc3RhbGxtZW50c1Jlc3VsdC5kYXRhIHx8IFtdO1xuICAgIFxuICAgIC8vIEFLQURFTcSwSyBZSUxBIEfDllJFIEbEsExUUkVMRU1FXG4gICAgLy8gw5bEn3JlbmNpbGVyaSBjcmVhdGVkX2F0IHRhcmloaW5lIGfDtnJlIGZpbHRyZWxlXG4gICAgY29uc3Qgc3R1ZGVudHMgPSBhbGxTdHVkZW50cy5maWx0ZXIocyA9PiB7XG4gICAgICBpZiAocy5jcmVhdGVkX2F0KSB7XG4gICAgICAgIHJldHVybiBzLmNyZWF0ZWRfYXQgPj0geWVhclN0YXJ0ICYmIHMuY3JlYXRlZF9hdCA8PSB5ZWFyRW5kO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSk7XG4gICAgXG4gICAgLy8gU2FkZWNlIGJ1IHnEsWxhIGFpdCDDtsSfcmVuY2lsZXJpbiBJRCdsZXJpbmkgYWxcbiAgICBjb25zdCBzdHVkZW50SWRzID0gbmV3IFNldChzdHVkZW50cy5tYXAocyA9PiBzLmlkKSk7XG4gICAgXG4gICAgLy8gVGFrc2l0bGVyaSBmaWx0cmVsZTogc2FkZWNlIGJ1IHnEsWxhIGFpdCDDtsSfcmVuY2lsZXJpbiB0YWtzaXRsZXJpXG4gICAgLy8gVkUgdGFrc2l0IHRhcmloaSBidSBha2FkZW1payB5xLFsIGnDp2luZGUgb2xhbmxhclxuICAgIGNvbnN0IGluc3RhbGxtZW50cyA9IGFsbEluc3RhbGxtZW50cy5maWx0ZXIoaW5zdCA9PiB7XG4gICAgICAvLyDDlm5jZSDDtsSfcmVuY2kgSUQnc2luZSBnw7ZyZSBmaWx0cmVsZVxuICAgICAgaWYgKCFzdHVkZW50SWRzLmhhcyhpbnN0LnN0dWRlbnRfaWQpKSByZXR1cm4gZmFsc2U7XG4gICAgICBcbiAgICAgIC8vIFRha3NpdCB0YXJpaGkgYnUgecSxbCBpw6dpbmRlIG1pIGtvbnRyb2wgZXRcbiAgICAgIGlmIChpbnN0LmR1ZV9kYXRlKSB7XG4gICAgICAgIHJldHVybiBpbnN0LmR1ZV9kYXRlID49IHllYXJTdGFydCAmJiBpbnN0LmR1ZV9kYXRlIDw9IHllYXJFbmQ7XG4gICAgICB9XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9KTtcblxuICAgIC8vIEtQSSBIRVNBUExBTUFMQVJJIChTZcOnaWxlbiB5xLFsYSBhaXQgdmVyaWxlcmRlbilcbiAgICBjb25zdCBhY3RpdmVTdHVkZW50cyA9IHN0dWRlbnRzLmxlbmd0aDtcbiAgICBcbiAgICAvLyBUb3BsYW0gw7ZkZW5lbiB0dXRhcsSxIGluc3RhbGxtZW50cyd0YW4gaGVzYXBsYVxuICAgIGNvbnN0IHBhaWRJbnN0YWxsbWVudHMgPSBpbnN0YWxsbWVudHMuZmlsdGVyKGluc3QgPT4gaW5zdC5pc19wYWlkKTtcbiAgICBjb25zdCB0b3RhbFJldmVudWUgPSBwYWlkSW5zdGFsbG1lbnRzLnJlZHVjZSgoc3VtLCBpbnN0KSA9PiBzdW0gKyAoaW5zdC5wYWlkX2Ftb3VudCB8fCBpbnN0LmFtb3VudCB8fCAwKSwgMCk7XG4gICAgXG4gICAgLy8gVG9wbGFtIHPDtnpsZcWfbWUgdHV0YXLEsVxuICAgIGNvbnN0IHRvdGFsQ29udHJhY3QgPSBpbnN0YWxsbWVudHMucmVkdWNlKChzdW0sIGluc3QpID0+IHN1bSArIChpbnN0LmFtb3VudCB8fCAwKSwgMCk7XG4gICAgXG4gICAgY29uc3QgcGF5bWVudFJhdGUgPSB0b3RhbENvbnRyYWN0ID4gMCA/ICgodG90YWxSZXZlbnVlIC8gdG90YWxDb250cmFjdCkgKiAxMDApLnRvRml4ZWQoMSkgOiAnMCc7XG4gICAgXG4gICAgLy8gQm9yw6dsdSDDtsSfcmVuY2kgc2F5xLFzxLEgKMO2ZGVubWVtacWfIHRha3NpdGkgb2xhbilcbiAgICBjb25zdCB1bnBhaWRJbnN0YWxsbWVudHMgPSBpbnN0YWxsbWVudHMuZmlsdGVyKGluc3QgPT4gIWluc3QuaXNfcGFpZCk7XG4gICAgY29uc3QgZGVidG9yU3R1ZGVudElkcyA9IG5ldyBTZXQodW5wYWlkSW5zdGFsbG1lbnRzLm1hcChpbnN0ID0+IGluc3Quc3R1ZGVudF9pZCkpO1xuICAgIGNvbnN0IGRlYnRvclN0dWRlbnRzID0gZGVidG9yU3R1ZGVudElkcy5zaXplO1xuICAgIFxuICAgIC8vIFRvcGxhbSBhbGFjYWsgKGJvcsOnKVxuICAgIGNvbnN0IHRvdGFsRGVidCA9IHVucGFpZEluc3RhbGxtZW50cy5yZWR1Y2UoKHN1bSwgaW5zdCkgPT4gc3VtICsgKGluc3QuYW1vdW50IHx8IDApLCAwKTtcblxuICAgIC8vIEJVR8OcTkvDnCBUQUhTxLBMQVRcbiAgICBjb25zdCB0b2RheVBheW1lbnRzID0gaW5zdGFsbG1lbnRzLmZpbHRlcihpbnN0ID0+IHtcbiAgICAgIGlmICghaW5zdC5pc19wYWlkIHx8ICFpbnN0LnBhaWRfYXQpIHJldHVybiBmYWxzZTtcbiAgICAgIHJldHVybiBpbnN0LnBhaWRfYXQgPj0gdG9kYXlTdGFydCAmJiBpbnN0LnBhaWRfYXQgPD0gdG9kYXlFbmQ7XG4gICAgfSk7XG4gICAgY29uc3QgdG9kYXlDb2xsZWN0ZWQgPSB0b2RheVBheW1lbnRzLnJlZHVjZSgoc3VtLCBwKSA9PiBzdW0gKyAocC5wYWlkX2Ftb3VudCB8fCAwKSwgMCk7XG4gICAgY29uc3QgdG9kYXlQYXltZW50Q291bnQgPSB0b2RheVBheW1lbnRzLmxlbmd0aDtcbiAgICBjb25zdCB0b2RheVN0dWRlbnRDb3VudCA9IG5ldyBTZXQodG9kYXlQYXltZW50cy5tYXAocCA9PiBwLnN0dWRlbnRfaWQpKS5zaXplO1xuICAgIFxuICAgIC8vIEJVIEFZIFRBSFPEsExBVFxuICAgIGNvbnN0IGN1cnJlbnRNb250aCA9IG5ldyBEYXRlKCk7XG4gICAgY29uc3QgbW9udGhTdGFydCA9IG5ldyBEYXRlKGN1cnJlbnRNb250aC5nZXRGdWxsWWVhcigpLCBjdXJyZW50TW9udGguZ2V0TW9udGgoKSwgMSkudG9JU09TdHJpbmcoKTtcbiAgICBjb25zdCBtb250aEVuZCA9IG5ldyBEYXRlKGN1cnJlbnRNb250aC5nZXRGdWxsWWVhcigpLCBjdXJyZW50TW9udGguZ2V0TW9udGgoKSArIDEsIDAsIDIzLCA1OSwgNTkpLnRvSVNPU3RyaW5nKCk7XG4gICAgXG4gICAgY29uc3QgbW9udGhseVBheW1lbnRzID0gaW5zdGFsbG1lbnRzLmZpbHRlcihpbnN0ID0+IHtcbiAgICAgIGlmICghaW5zdC5pc19wYWlkIHx8ICFpbnN0LnBhaWRfYXQpIHJldHVybiBmYWxzZTtcbiAgICAgIHJldHVybiBpbnN0LnBhaWRfYXQgPj0gbW9udGhTdGFydCAmJiBpbnN0LnBhaWRfYXQgPD0gbW9udGhFbmQ7XG4gICAgfSk7XG4gICAgY29uc3QgbW9udGhseUNvbGxlY3Rpb24gPSBtb250aGx5UGF5bWVudHMucmVkdWNlKChzdW0sIHApID0+IHN1bSArIChwLnBhaWRfYW1vdW50IHx8IDApLCAwKTtcblxuICAgIC8vIEJFS0xFWUVOIMOWREVNRUxFUlxuICAgIGNvbnN0IG92ZXJkdWUgPSB1bnBhaWRJbnN0YWxsbWVudHMuZmlsdGVyKGluc3QgPT4gaW5zdC5kdWVfZGF0ZSAmJiBuZXcgRGF0ZShpbnN0LmR1ZV9kYXRlKSA8IG5vdyk7XG4gICAgY29uc3Qgb3ZlcmR1ZUFtb3VudCA9IG92ZXJkdWUucmVkdWNlKChzdW0sIGkpID0+IHN1bSArIChpLmFtb3VudCB8fCAwKSwgMCk7XG4gICAgY29uc3Qgb3ZlcmR1ZUNvdW50ID0gb3ZlcmR1ZS5sZW5ndGg7XG5cbiAgICAvLyA2IEFZTElLIEbEsE5BTlMgREFUQVxuICAgIGNvbnN0IG1vbnRobHlEYXRhID0gW107XG4gICAgY29uc3QgbW9udGhOYW1lcyA9IFsnT2NhJywgJ8WedWInLCAnTWFyJywgJ05pcycsICdNYXknLCAnSGF6JywgJ1RlbScsICdBxJ91JywgJ0V5bCcsICdFa2knLCAnS2FzJywgJ0FyYSddO1xuICAgIFxuICAgIGZvciAobGV0IGkgPSA1OyBpID49IDA7IGktLSkge1xuICAgICAgY29uc3QgZCA9IG5ldyBEYXRlKCk7XG4gICAgICBkLnNldE1vbnRoKGQuZ2V0TW9udGgoKSAtIGkpO1xuICAgICAgY29uc3QgbW9udGhLZXkgPSBgJHtkLmdldEZ1bGxZZWFyKCl9LSR7U3RyaW5nKGQuZ2V0TW9udGgoKSArIDEpLnBhZFN0YXJ0KDIsICcwJyl9YDtcbiAgICAgIFxuICAgICAgY29uc3QgbW9udGhQYXltZW50cyA9IGluc3RhbGxtZW50cy5maWx0ZXIoaW5zdCA9PiB7XG4gICAgICAgIGlmICghaW5zdC5pc19wYWlkIHx8ICFpbnN0LnBhaWRfYXQpIHJldHVybiBmYWxzZTtcbiAgICAgICAgY29uc3QgcGFpZERhdGUgPSBuZXcgRGF0ZShpbnN0LnBhaWRfYXQpO1xuICAgICAgICByZXR1cm4gYCR7cGFpZERhdGUuZ2V0RnVsbFllYXIoKX0tJHtTdHJpbmcocGFpZERhdGUuZ2V0TW9udGgoKSArIDEpLnBhZFN0YXJ0KDIsICcwJyl9YCA9PT0gbW9udGhLZXk7XG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgY29uc3QgaW5jb21lID0gbW9udGhQYXltZW50cy5yZWR1Y2UoKHN1bSwgcCkgPT4gc3VtICsgKHAucGFpZF9hbW91bnQgfHwgMCksIDApO1xuICAgICAgXG4gICAgICBtb250aGx5RGF0YS5wdXNoKHtcbiAgICAgICAgbW9udGg6IG1vbnRoTmFtZXNbZC5nZXRNb250aCgpXSxcbiAgICAgICAgaW5jb21lLFxuICAgICAgICBleHBlbnNlOiAwLCAvLyBQbGFjZWhvbGRlclxuICAgICAgICBuZXQ6IGluY29tZVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gUkVTUE9OU0VcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIGRhdGE6IHtcbiAgICAgICAgYWNhZGVtaWNZZWFyLCAvLyBIYW5naSB5xLFsxLFuIHZlcmlzaSBvbGR1xJ91bnUgYmVsaXJ0XG4gICAgICAgIGtwaToge1xuICAgICAgICAgIGFjdGl2ZVN0dWRlbnRzLFxuICAgICAgICAgIHRvdGFsUmV2ZW51ZSxcbiAgICAgICAgICBwYXltZW50UmF0ZTogcGFyc2VGbG9hdChwYXltZW50UmF0ZSksXG4gICAgICAgICAgZGVidG9yU3R1ZGVudHMsXG4gICAgICAgICAgdG90YWxEZWJ0LFxuICAgICAgICAgIG1vbnRobHlDb2xsZWN0aW9uXG4gICAgICAgIH0sXG4gICAgICAgIHRvZGF5Q29sbGVjdGlvbjoge1xuICAgICAgICAgIHRvdGFsQ29sbGVjdGVkOiB0b2RheUNvbGxlY3RlZCxcbiAgICAgICAgICBwYXltZW50Q291bnQ6IHRvZGF5UGF5bWVudENvdW50LFxuICAgICAgICAgIHN0dWRlbnRDb3VudDogdG9kYXlTdHVkZW50Q291bnQsXG4gICAgICAgICAgZGFpbHlUYXJnZXQ6IDE2NjY3LCAvLyA1MDBLLzMwXG4gICAgICAgICAgdGFyZ2V0UGVyY2VudGFnZTogKHRvZGF5Q29sbGVjdGVkIC8gMTY2NjcpICogMTAwXG4gICAgICAgIH0sXG4gICAgICAgIHBlbmRpbmdQYXltZW50czoge1xuICAgICAgICAgIG92ZXJkdWVBbW91bnQsXG4gICAgICAgICAgb3ZlcmR1ZUNvdW50LFxuICAgICAgICAgIG92ZXJkdWVTdHVkZW50czogbmV3IFNldChvdmVyZHVlLm1hcChpID0+IGkuc3R1ZGVudF9pZCkpLnNpemVcbiAgICAgICAgfSxcbiAgICAgICAgbW9udGhseUZpbmFuY2U6IG1vbnRobHlEYXRhXG4gICAgICB9XG4gICAgfSwge1xuICAgICAgc3RhdHVzOiAyMDAsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgICdDYWNoZS1Db250cm9sJzogJ3B1YmxpYywgcy1tYXhhZ2U9NjAsIHN0YWxlLXdoaWxlLXJldmFsaWRhdGU9MTIwJ1xuICAgICAgfVxuICAgIH0pO1xuXG4gIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICBjb25zb2xlLmVycm9yKCdEYXNoYm9hcmQgc3RhdHMgZXJyb3I6JywgZXJyb3IpO1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvci5tZXNzYWdlIHx8ICdJbnRlcm5hbCBzZXJ2ZXIgZXJyb3InIH0sXG4gICAgICB7IHN0YXR1czogNTAwIH1cbiAgICApO1xuICB9XG59XG5cbiJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJnZXRTZXJ2aWNlUm9sZUNsaWVudCIsInJ1bnRpbWUiLCJkeW5hbWljIiwiZ2V0QWNhZGVtaWNZZWFyRGF0ZXMiLCJhY2FkZW1pY1llYXIiLCJzdGFydFllYXIiLCJlbmRZZWFyIiwic3BsaXQiLCJtYXAiLCJOdW1iZXIiLCJzdGFydCIsIkRhdGUiLCJlbmQiLCJ0b0lTT1N0cmluZyIsIkdFVCIsInJlcSIsInN1cGFiYXNlIiwic2VhcmNoUGFyYW1zIiwiVVJMIiwidXJsIiwiZ2V0IiwiZ2V0Q3VycmVudEFjYWRlbWljWWVhciIsInllYXJTdGFydCIsInllYXJFbmQiLCJub3ciLCJ0b2RheVN0YXJ0IiwiZ2V0RnVsbFllYXIiLCJnZXRNb250aCIsImdldERhdGUiLCJ0b2RheUVuZCIsInN0dWRlbnRzUmVzdWx0IiwiaW5zdGFsbG1lbnRzUmVzdWx0IiwiUHJvbWlzZSIsImFsbCIsImZyb20iLCJzZWxlY3QiLCJtb250aCIsInllYXIiLCJlcnJvciIsImFsbFN0dWRlbnRzIiwiZGF0YSIsImFsbEluc3RhbGxtZW50cyIsInN0dWRlbnRzIiwiZmlsdGVyIiwicyIsImNyZWF0ZWRfYXQiLCJzdHVkZW50SWRzIiwiU2V0IiwiaWQiLCJpbnN0YWxsbWVudHMiLCJpbnN0IiwiaGFzIiwic3R1ZGVudF9pZCIsImR1ZV9kYXRlIiwiYWN0aXZlU3R1ZGVudHMiLCJsZW5ndGgiLCJwYWlkSW5zdGFsbG1lbnRzIiwiaXNfcGFpZCIsInRvdGFsUmV2ZW51ZSIsInJlZHVjZSIsInN1bSIsInBhaWRfYW1vdW50IiwiYW1vdW50IiwidG90YWxDb250cmFjdCIsInBheW1lbnRSYXRlIiwidG9GaXhlZCIsInVucGFpZEluc3RhbGxtZW50cyIsImRlYnRvclN0dWRlbnRJZHMiLCJkZWJ0b3JTdHVkZW50cyIsInNpemUiLCJ0b3RhbERlYnQiLCJ0b2RheVBheW1lbnRzIiwicGFpZF9hdCIsInRvZGF5Q29sbGVjdGVkIiwicCIsInRvZGF5UGF5bWVudENvdW50IiwidG9kYXlTdHVkZW50Q291bnQiLCJjdXJyZW50TW9udGgiLCJtb250aFN0YXJ0IiwibW9udGhFbmQiLCJtb250aGx5UGF5bWVudHMiLCJtb250aGx5Q29sbGVjdGlvbiIsIm92ZXJkdWUiLCJvdmVyZHVlQW1vdW50IiwiaSIsIm92ZXJkdWVDb3VudCIsIm1vbnRobHlEYXRhIiwibW9udGhOYW1lcyIsImQiLCJzZXRNb250aCIsIm1vbnRoS2V5IiwiU3RyaW5nIiwicGFkU3RhcnQiLCJtb250aFBheW1lbnRzIiwicGFpZERhdGUiLCJpbmNvbWUiLCJwdXNoIiwiZXhwZW5zZSIsIm5ldCIsImpzb24iLCJzdWNjZXNzIiwia3BpIiwicGFyc2VGbG9hdCIsInRvZGF5Q29sbGVjdGlvbiIsInRvdGFsQ29sbGVjdGVkIiwicGF5bWVudENvdW50Iiwic3R1ZGVudENvdW50IiwiZGFpbHlUYXJnZXQiLCJ0YXJnZXRQZXJjZW50YWdlIiwicGVuZGluZ1BheW1lbnRzIiwib3ZlcmR1ZVN0dWRlbnRzIiwibW9udGhseUZpbmFuY2UiLCJzdGF0dXMiLCJoZWFkZXJzIiwiY29uc29sZSIsIm1lc3NhZ2UiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./app/api/dashboard/stats/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/supabase/server.ts":
/*!********************************!*\
  !*** ./lib/supabase/server.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createRlsServerClient: () => (/* binding */ createRlsServerClient),\n/* harmony export */   createServiceRoleClient: () => (/* binding */ createServiceRoleClient),\n/* harmony export */   getServiceRoleClient: () => (/* binding */ getServiceRoleClient)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"(rsc)/./node_modules/@supabase/supabase-js/dist/module/index.js\");\n\n// ============================================================\n// SERVER-SIDE SUPABASE CLIENTLERİ\n// ============================================================\n// NOT:\n// - Service role key **sadece** yönetim/seed senaryolarında kullanılmalıdır.\n// - Uygulama API'leri varsayılan olarak RLS + anon key ile çalışmalıdır.\n// ============================================================\nconst SUPABASE_URL = \"https://vwezzkyuuzyadlntymxc.supabase.co\";\nconst SUPABASE_ANON_KEY = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZ3ZXp6a3l1dXp5YWRsbnR5bXhjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjA2MzcwOTIsImV4cCI6MjA3NjIxMzA5Mn0.NZlAmgCpoDHBeZnNuhwLdF95Zy-VH7gr3HMcXuOi3MM\";\nconst SUPABASE_SERVICE_ROLE_KEY = process.env.SUPABASE_SERVICE_ROLE_KEY;\n// ------------------------------------------------------------\n// 1) RLS UYUMLU CLIENT (Anon key + isteğe bağlı Authorization)\n// ------------------------------------------------------------\nconst createRlsServerClient = (accessToken)=>(0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(SUPABASE_URL, SUPABASE_ANON_KEY, {\n        global: accessToken ? {\n            headers: {\n                Authorization: `Bearer ${accessToken}`\n            }\n        } : {},\n        auth: {\n            autoRefreshToken: false,\n            persistSession: false\n        }\n    });\n// ------------------------------------------------------------\n// 2) SERVICE ROLE CLIENT (sadece seed / bakım scriptleri için)\n// ------------------------------------------------------------\nconst createServiceRoleClient = ()=>(0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(SUPABASE_URL, SUPABASE_SERVICE_ROLE_KEY, {\n        auth: {\n            autoRefreshToken: false,\n            persistSession: false\n        }\n    });\n// Singleton instance (service role)\nlet serviceRoleInstance = null;\nconst getServiceRoleClient = ()=>{\n    if (!serviceRoleInstance) {\n        serviceRoleInstance = createServiceRoleClient();\n    }\n    return serviceRoleInstance;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvc3VwYWJhc2Uvc2VydmVyLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBMEU7QUFFMUUsK0RBQStEO0FBQy9ELGtDQUFrQztBQUNsQywrREFBK0Q7QUFDL0QsT0FBTztBQUNQLDZFQUE2RTtBQUM3RSx5RUFBeUU7QUFDekUsK0RBQStEO0FBRS9ELE1BQU1DLGVBQWVDLDBDQUFvQztBQUN6RCxNQUFNRyxvQkFBb0JILGtOQUF5QztBQUNuRSxNQUFNSyw0QkFBNEJMLFFBQVFDLEdBQUcsQ0FBQ0kseUJBQXlCO0FBRXZFLCtEQUErRDtBQUMvRCwrREFBK0Q7QUFDL0QsK0RBQStEO0FBRXhELE1BQU1DLHdCQUF3QixDQUFDQyxjQUNwQ1QsbUVBQVlBLENBQUNDLGNBQWNJLG1CQUFtQjtRQUM1Q0ssUUFBUUQsY0FDSjtZQUNFRSxTQUFTO2dCQUNQQyxlQUFlLENBQUMsT0FBTyxFQUFFSCxZQUFZLENBQUM7WUFDeEM7UUFDRixJQUNBLENBQUM7UUFDTEksTUFBTTtZQUNKQyxrQkFBa0I7WUFDbEJDLGdCQUFnQjtRQUNsQjtJQUNGLEdBQUc7QUFFTCwrREFBK0Q7QUFDL0QsK0RBQStEO0FBQy9ELCtEQUErRDtBQUV4RCxNQUFNQywwQkFBMEIsSUFDckNoQixtRUFBWUEsQ0FBQ0MsY0FBY00sMkJBQTJCO1FBQ3BETSxNQUFNO1lBQ0pDLGtCQUFrQjtZQUNsQkMsZ0JBQWdCO1FBQ2xCO0lBQ0YsR0FBRztBQUVMLG9DQUFvQztBQUNwQyxJQUFJRSxzQkFBa0Q7QUFFL0MsTUFBTUMsdUJBQXVCO0lBQ2xDLElBQUksQ0FBQ0QscUJBQXFCO1FBQ3hCQSxzQkFBc0JEO0lBQ3hCO0lBQ0EsT0FBT0M7QUFDVCxFQUFFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWthZGVtaWh1Yi8uL2xpYi9zdXBhYmFzZS9zZXJ2ZXIudHM/NjYyNSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVDbGllbnQsIHR5cGUgU3VwYWJhc2VDbGllbnQgfSBmcm9tICdAc3VwYWJhc2Uvc3VwYWJhc2UtanMnO1xuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIFNFUlZFUi1TSURFIFNVUEFCQVNFIENMSUVOVExFUsSwXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIE5PVDpcbi8vIC0gU2VydmljZSByb2xlIGtleSAqKnNhZGVjZSoqIHnDtm5ldGltL3NlZWQgc2VuYXJ5b2xhcsSxbmRhIGt1bGxhbsSxbG1hbMSxZMSxci5cbi8vIC0gVXlndWxhbWEgQVBJJ2xlcmkgdmFyc2F5xLFsYW4gb2xhcmFrIFJMUyArIGFub24ga2V5IGlsZSDDp2FsxLHFn21hbMSxZMSxci5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5jb25zdCBTVVBBQkFTRV9VUkwgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwhO1xuY29uc3QgU1VQQUJBU0VfQU5PTl9LRVkgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWSE7XG5jb25zdCBTVVBBQkFTRV9TRVJWSUNFX1JPTEVfS0VZID0gcHJvY2Vzcy5lbnYuU1VQQUJBU0VfU0VSVklDRV9ST0xFX0tFWSE7XG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gMSkgUkxTIFVZVU1MVSBDTElFTlQgKEFub24ga2V5ICsgaXN0ZcSfZSBiYcSfbMSxIEF1dGhvcml6YXRpb24pXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuZXhwb3J0IGNvbnN0IGNyZWF0ZVJsc1NlcnZlckNsaWVudCA9IChhY2Nlc3NUb2tlbj86IHN0cmluZyk6IFN1cGFiYXNlQ2xpZW50PGFueT4gPT5cbiAgY3JlYXRlQ2xpZW50KFNVUEFCQVNFX1VSTCwgU1VQQUJBU0VfQU5PTl9LRVksIHtcbiAgICBnbG9iYWw6IGFjY2Vzc1Rva2VuXG4gICAgICA/IHtcbiAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7YWNjZXNzVG9rZW59YCxcbiAgICAgICAgICB9LFxuICAgICAgICB9XG4gICAgICA6IHt9LFxuICAgIGF1dGg6IHtcbiAgICAgIGF1dG9SZWZyZXNoVG9rZW46IGZhbHNlLFxuICAgICAgcGVyc2lzdFNlc3Npb246IGZhbHNlLFxuICAgIH0sXG4gIH0pO1xuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIDIpIFNFUlZJQ0UgUk9MRSBDTElFTlQgKHNhZGVjZSBzZWVkIC8gYmFrxLFtIHNjcmlwdGxlcmkgacOnaW4pXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuZXhwb3J0IGNvbnN0IGNyZWF0ZVNlcnZpY2VSb2xlQ2xpZW50ID0gKCk6IFN1cGFiYXNlQ2xpZW50PGFueT4gPT5cbiAgY3JlYXRlQ2xpZW50KFNVUEFCQVNFX1VSTCwgU1VQQUJBU0VfU0VSVklDRV9ST0xFX0tFWSwge1xuICAgIGF1dGg6IHtcbiAgICAgIGF1dG9SZWZyZXNoVG9rZW46IGZhbHNlLFxuICAgICAgcGVyc2lzdFNlc3Npb246IGZhbHNlLFxuICAgIH0sXG4gIH0pO1xuXG4vLyBTaW5nbGV0b24gaW5zdGFuY2UgKHNlcnZpY2Ugcm9sZSlcbmxldCBzZXJ2aWNlUm9sZUluc3RhbmNlOiBTdXBhYmFzZUNsaWVudDxhbnk+IHwgbnVsbCA9IG51bGw7XG5cbmV4cG9ydCBjb25zdCBnZXRTZXJ2aWNlUm9sZUNsaWVudCA9ICgpOiBTdXBhYmFzZUNsaWVudDxhbnk+ID0+IHtcbiAgaWYgKCFzZXJ2aWNlUm9sZUluc3RhbmNlKSB7XG4gICAgc2VydmljZVJvbGVJbnN0YW5jZSA9IGNyZWF0ZVNlcnZpY2VSb2xlQ2xpZW50KCk7XG4gIH1cbiAgcmV0dXJuIHNlcnZpY2VSb2xlSW5zdGFuY2U7XG59O1xuXG5cblxuXG5cblxuXG5cblxuIl0sIm5hbWVzIjpbImNyZWF0ZUNsaWVudCIsIlNVUEFCQVNFX1VSTCIsInByb2Nlc3MiLCJlbnYiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwiLCJTVVBBQkFTRV9BTk9OX0tFWSIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZIiwiU1VQQUJBU0VfU0VSVklDRV9ST0xFX0tFWSIsImNyZWF0ZVJsc1NlcnZlckNsaWVudCIsImFjY2Vzc1Rva2VuIiwiZ2xvYmFsIiwiaGVhZGVycyIsIkF1dGhvcml6YXRpb24iLCJhdXRoIiwiYXV0b1JlZnJlc2hUb2tlbiIsInBlcnNpc3RTZXNzaW9uIiwiY3JlYXRlU2VydmljZVJvbGVDbGllbnQiLCJzZXJ2aWNlUm9sZUluc3RhbmNlIiwiZ2V0U2VydmljZVJvbGVDbGllbnQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/supabase/server.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@supabase","vendor-chunks/tr46","vendor-chunks/whatwg-url","vendor-chunks/webidl-conversions"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fdashboard%2Fstats%2Froute&page=%2Fapi%2Fdashboard%2Fstats%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fdashboard%2Fstats%2Froute.ts&appDir=%2FUsers%2Ferdalkiziroglu%2Fyeni%20akdemihubiai%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Ferdalkiziroglu%2Fyeni%20akdemihubiai&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();