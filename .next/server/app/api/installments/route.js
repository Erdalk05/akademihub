"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/installments/route";
exports.ids = ["app/api/installments/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("punycode");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Finstallments%2Froute&page=%2Fapi%2Finstallments%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Finstallments%2Froute.ts&appDir=%2FUsers%2Ferdalkiziroglu%2Fyeni%20akdemihubiai%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Ferdalkiziroglu%2Fyeni%20akdemihubiai&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Finstallments%2Froute&page=%2Fapi%2Finstallments%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Finstallments%2Froute.ts&appDir=%2FUsers%2Ferdalkiziroglu%2Fyeni%20akdemihubiai%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Ferdalkiziroglu%2Fyeni%20akdemihubiai&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_erdalkiziroglu_yeni_akdemihubiai_app_api_installments_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/installments/route.ts */ \"(rsc)/./app/api/installments/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/installments/route\",\n        pathname: \"/api/installments\",\n        filename: \"route\",\n        bundlePath: \"app/api/installments/route\"\n    },\n    resolvedPagePath: \"/Users/erdalkiziroglu/yeni akdemihubiai/app/api/installments/route.ts\",\n    nextConfigOutput,\n    userland: _Users_erdalkiziroglu_yeni_akdemihubiai_app_api_installments_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/installments/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZpbnN0YWxsbWVudHMlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRmluc3RhbGxtZW50cyUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRmluc3RhbGxtZW50cyUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRmVyZGFsa2l6aXJvZ2x1JTJGeWVuaSUyMGFrZGVtaWh1YmlhaSUyRmFwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9JTJGVXNlcnMlMkZlcmRhbGtpemlyb2dsdSUyRnllbmklMjBha2RlbWlodWJpYWkmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQ3FCO0FBQ2xHO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnSEFBbUI7QUFDM0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsaUVBQWlFO0FBQ3pFO0FBQ0E7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDdUg7O0FBRXZIIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWthZGVtaWh1Yi8/MWI2YSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIvVXNlcnMvZXJkYWxraXppcm9nbHUveWVuaSBha2RlbWlodWJpYWkvYXBwL2FwaS9pbnN0YWxsbWVudHMvcm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2luc3RhbGxtZW50cy9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2luc3RhbGxtZW50c1wiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvaW5zdGFsbG1lbnRzL3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiL1VzZXJzL2VyZGFsa2l6aXJvZ2x1L3llbmkgYWtkZW1paHViaWFpL2FwcC9hcGkvaW5zdGFsbG1lbnRzL3JvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS9pbnN0YWxsbWVudHMvcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Finstallments%2Froute&page=%2Fapi%2Finstallments%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Finstallments%2Froute.ts&appDir=%2FUsers%2Ferdalkiziroglu%2Fyeni%20akdemihubiai%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Ferdalkiziroglu%2Fyeni%20akdemihubiai&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/installments/route.ts":
/*!***************************************!*\
  !*** ./app/api/installments/route.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DELETE: () => (/* binding */ DELETE),\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   PATCH: () => (/* binding */ PATCH),\n/* harmony export */   POST: () => (/* binding */ POST),\n/* harmony export */   runtime: () => (/* binding */ runtime)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_supabase_server__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/supabase/server */ \"(rsc)/./lib/supabase/server.ts\");\n\n\nconst runtime = \"nodejs\";\nconst getAccessTokenFromRequest = (req)=>{\n    const auth = req.headers.get(\"authorization\") || req.headers.get(\"Authorization\");\n    if (!auth) return undefined;\n    const [scheme, token] = auth.split(\" \");\n    if (!scheme || !token || scheme.toLowerCase() !== \"bearer\") return undefined;\n    return token;\n};\n/**\n * Akademik yılın başlangıç ve bitiş tarihlerini hesapla\n * Örn: \"2024-2025\" → { start: \"2024-09-01\", end: \"2025-08-31\" }\n */ function getAcademicYearDates(academicYear) {\n    const [startYear, endYear] = academicYear.split(\"-\").map(Number);\n    const start = new Date(startYear, 8, 1, 0, 0, 0); // Eylül 1\n    const end = new Date(endYear, 7, 31, 23, 59, 59); // Ağustos 31\n    return {\n        start: start.toISOString(),\n        end: end.toISOString()\n    };\n}\n// GET /api/installments?studentId=UUID&academicYear=2024-2025\nasync function GET(req) {\n    try {\n        const { searchParams } = new URL(req.url);\n        const studentId = searchParams.get(\"studentId\");\n        const academicYear = searchParams.get(\"academicYear\");\n        const accessToken = getAccessTokenFromRequest(req);\n        const supabase = accessToken ? (0,_lib_supabase_server__WEBPACK_IMPORTED_MODULE_1__.createRlsServerClient)(accessToken) : (0,_lib_supabase_server__WEBPACK_IMPORTED_MODULE_1__.getServiceRoleClient)();\n        // 1. Taksitleri çek\n        let q = supabase.from(\"finance_installments\").select(\"*\");\n        if (studentId) q = q.eq(\"student_id\", studentId);\n        // Akademik yıl filtresi\n        if (academicYear) {\n            const { start, end } = getAcademicYearDates(academicYear);\n            q = q.gte(\"due_date\", start).lte(\"due_date\", end);\n        }\n        const { data: installments, error: instError } = await q.order(\"due_date\", {\n            ascending: true\n        });\n        if (instError) return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            error: instError.message\n        }, {\n            status: 500\n        });\n        // 2. Öğrenci bilgilerini ayrı çek\n        const studentIds = [\n            ...new Set((installments || []).map((i)=>i.student_id).filter(Boolean))\n        ];\n        let studentsMap = {};\n        if (studentIds.length > 0) {\n            const { data: studentsData } = await supabase.from(\"students\").select(\"id, first_name, last_name, student_no, class, section\").in(\"id\", studentIds);\n            (studentsData || []).forEach((s)=>{\n                studentsMap[s.id] = s;\n            });\n        }\n        // 3. Verileri birleştir\n        const list = (installments || []).map((r)=>{\n            const student = studentsMap[r.student_id];\n            const studentName = student ? `${student.first_name || \"\"} ${student.last_name || \"\"}`.trim() : null;\n            const studentNo = student?.student_no || null;\n            const studentClass = student?.class ? `${student.class}-${student.section || \"A\"}` : null;\n            return {\n                id: r.id,\n                student_id: r.student_id,\n                studentName,\n                studentNo,\n                studentClass,\n                installment_no: r.installment_no,\n                agreement_id: r.agreement_id || null,\n                sale_id: r.sale_id || null,\n                source: r.source || \"education\",\n                amount: Number(r.amount),\n                paid_amount: r.paid_amount !== null && r.paid_amount !== undefined ? Number(r.paid_amount) : undefined,\n                due_date: r.due_date,\n                is_paid: r.is_paid,\n                paid_at: r.paid_at || null,\n                payment_method: r.payment_method || null,\n                payment_id: r.payment_id || null,\n                status: r.status || \"active\",\n                note: r.note || null,\n                collected_by: r.collected_by || null,\n                is_old: typeof r.is_old === \"boolean\" ? r.is_old : undefined,\n                is_new: typeof r.is_new === \"boolean\" ? r.is_new : undefined\n            };\n        });\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            data: list\n        }, {\n            status: 200\n        });\n    } catch (e) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            error: e.message\n        }, {\n            status: 500\n        });\n    }\n}\n// POST /api/installments\n// body: { student_id, installment_no, amount, due_date }\nasync function POST(req) {\n    try {\n        const body = await req.json();\n        const accessToken = getAccessTokenFromRequest(req);\n        const supabase = accessToken ? (0,_lib_supabase_server__WEBPACK_IMPORTED_MODULE_1__.createRlsServerClient)(accessToken) : (0,_lib_supabase_server__WEBPACK_IMPORTED_MODULE_1__.getServiceRoleClient)();\n        if (!body?.student_id || !body?.installment_no || body.amount === undefined) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: \"student_id, installment_no ve amount zorunlu\"\n            }, {\n                status: 400\n            });\n        }\n        const payload = {\n            student_id: body.student_id,\n            installment_no: Number(body.installment_no),\n            amount: Number(body.amount),\n            due_date: body.due_date || null,\n            is_paid: false,\n            payment_id: null\n        };\n        const { data, error } = await supabase.from(\"finance_installments\").insert([\n            payload\n        ]).select(\"id, student_id, installment_no, amount, due_date, is_paid, payment_id, created_at\").single();\n        if (error) return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            error: error.message\n        }, {\n            status: 500\n        });\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            data\n        }, {\n            status: 200\n        });\n    } catch (e) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            error: e.message\n        }, {\n            status: 500\n        });\n    }\n}\n// PATCH /api/installments\n// body: { id, is_paid?, payment_id?, paid_at?, payment_method? }\nasync function PATCH(req) {\n    try {\n        const body = await req.json();\n        const accessToken = getAccessTokenFromRequest(req);\n        const supabase = accessToken ? (0,_lib_supabase_server__WEBPACK_IMPORTED_MODULE_1__.createRlsServerClient)(accessToken) : (0,_lib_supabase_server__WEBPACK_IMPORTED_MODULE_1__.getServiceRoleClient)();\n        if (!body?.id) return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            error: \"id zorunlu\"\n        }, {\n            status: 400\n        });\n        const update = {};\n        if (typeof body.is_paid === \"boolean\") update.is_paid = body.is_paid;\n        if (body.payment_id !== undefined) update.payment_id = body.payment_id;\n        if (body.paid_at !== undefined) update.paid_at = body.paid_at;\n        if (body.payment_method !== undefined) update.payment_method = body.payment_method;\n        if (body.paid_amount !== undefined) update.paid_amount = body.paid_amount;\n        const { data, error } = await supabase.from(\"finance_installments\").update(update).eq(\"id\", body.id).select(\"id, student_id, installment_no, amount, due_date, is_paid, paid_at, payment_id, payment_method, created_at\").single();\n        if (error) return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            error: error.message\n        }, {\n            status: 500\n        });\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            data\n        }, {\n            status: 200\n        });\n    } catch (e) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            error: e.message\n        }, {\n            status: 500\n        });\n    }\n}\n// DELETE /api/installments?id=UUID\nasync function DELETE(req) {\n    try {\n        const accessToken = getAccessTokenFromRequest(req);\n        const supabase = accessToken ? (0,_lib_supabase_server__WEBPACK_IMPORTED_MODULE_1__.createRlsServerClient)(accessToken) : (0,_lib_supabase_server__WEBPACK_IMPORTED_MODULE_1__.getServiceRoleClient)();\n        const url = new URL(req.url);\n        const idParam = url.searchParams.get(\"id\");\n        let id = idParam;\n        if (!id) {\n            try {\n                const body = await req.json();\n                id = body?.id;\n            } catch  {}\n        }\n        if (!id) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: \"id zorunludur\"\n            }, {\n                status: 400\n            });\n        }\n        const { error } = await supabase.from(\"finance_installments\").delete().eq(\"id\", id);\n        if (error) return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            error: error.message\n        }, {\n            status: 500\n        });\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true\n        }, {\n            status: 200\n        });\n    } catch (e) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            error: e.message\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL2luc3RhbGxtZW50cy9yb3V0ZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQXdEO0FBQzRCO0FBRTdFLE1BQU1HLFVBQVUsU0FBUztBQUVoQyxNQUFNQyw0QkFBNEIsQ0FBQ0M7SUFDakMsTUFBTUMsT0FBT0QsSUFBSUUsT0FBTyxDQUFDQyxHQUFHLENBQUMsb0JBQW9CSCxJQUFJRSxPQUFPLENBQUNDLEdBQUcsQ0FBQztJQUNqRSxJQUFJLENBQUNGLE1BQU0sT0FBT0c7SUFDbEIsTUFBTSxDQUFDQyxRQUFRQyxNQUFNLEdBQUdMLEtBQUtNLEtBQUssQ0FBQztJQUNuQyxJQUFJLENBQUNGLFVBQVUsQ0FBQ0MsU0FBU0QsT0FBT0csV0FBVyxPQUFPLFVBQVUsT0FBT0o7SUFDbkUsT0FBT0U7QUFDVDtBQUVBOzs7Q0FHQyxHQUNELFNBQVNHLHFCQUFxQkMsWUFBb0I7SUFDaEQsTUFBTSxDQUFDQyxXQUFXQyxRQUFRLEdBQUdGLGFBQWFILEtBQUssQ0FBQyxLQUFLTSxHQUFHLENBQUNDO0lBQ3pELE1BQU1DLFFBQVEsSUFBSUMsS0FBS0wsV0FBVyxHQUFHLEdBQUcsR0FBRyxHQUFHLElBQUksVUFBVTtJQUM1RCxNQUFNTSxNQUFNLElBQUlELEtBQUtKLFNBQVMsR0FBRyxJQUFJLElBQUksSUFBSSxLQUFLLGFBQWE7SUFDL0QsT0FBTztRQUFFRyxPQUFPQSxNQUFNRyxXQUFXO1FBQUlELEtBQUtBLElBQUlDLFdBQVc7SUFBRztBQUM5RDtBQUVBLDhEQUE4RDtBQUN2RCxlQUFlQyxJQUFJbkIsR0FBZ0I7SUFDeEMsSUFBSTtRQUNGLE1BQU0sRUFBRW9CLFlBQVksRUFBRSxHQUFHLElBQUlDLElBQUlyQixJQUFJc0IsR0FBRztRQUN4QyxNQUFNQyxZQUFZSCxhQUFhakIsR0FBRyxDQUFDO1FBQ25DLE1BQU1PLGVBQWVVLGFBQWFqQixHQUFHLENBQUM7UUFDdEMsTUFBTXFCLGNBQWN6QiwwQkFBMEJDO1FBQzlDLE1BQU15QixXQUFXRCxjQUNiNUIsMkVBQXFCQSxDQUFDNEIsZUFDdEIzQiwwRUFBb0JBO1FBRXhCLG9CQUFvQjtRQUNwQixJQUFJNkIsSUFBSUQsU0FDTEUsSUFBSSxDQUFDLHdCQUNMQyxNQUFNLENBQUM7UUFDVixJQUFJTCxXQUFXRyxJQUFJQSxFQUFFRyxFQUFFLENBQUMsY0FBY047UUFFdEMsd0JBQXdCO1FBQ3hCLElBQUliLGNBQWM7WUFDaEIsTUFBTSxFQUFFSyxLQUFLLEVBQUVFLEdBQUcsRUFBRSxHQUFHUixxQkFBcUJDO1lBQzVDZ0IsSUFBSUEsRUFBRUksR0FBRyxDQUFDLFlBQVlmLE9BQU9nQixHQUFHLENBQUMsWUFBWWQ7UUFDL0M7UUFFQSxNQUFNLEVBQUVlLE1BQU1DLFlBQVksRUFBRUMsT0FBT0MsU0FBUyxFQUFFLEdBQUcsTUFBTVQsRUFBRVUsS0FBSyxDQUFDLFlBQVk7WUFBRUMsV0FBVztRQUFLO1FBQzdGLElBQUlGLFdBQVcsT0FBT3hDLHFEQUFZQSxDQUFDMkMsSUFBSSxDQUFDO1lBQUVDLFNBQVM7WUFBT0wsT0FBT0MsVUFBVUssT0FBTztRQUFDLEdBQUc7WUFBRUMsUUFBUTtRQUFJO1FBRXBHLGtDQUFrQztRQUNsQyxNQUFNQyxhQUFhO2VBQUksSUFBSUMsSUFBSSxDQUFDVixnQkFBZ0IsRUFBRSxFQUFFcEIsR0FBRyxDQUFDLENBQUMrQixJQUFXQSxFQUFFQyxVQUFVLEVBQUVDLE1BQU0sQ0FBQ0M7U0FBVTtRQUVuRyxJQUFJQyxjQUFtQyxDQUFDO1FBQ3hDLElBQUlOLFdBQVdPLE1BQU0sR0FBRyxHQUFHO1lBQ3pCLE1BQU0sRUFBRWpCLE1BQU1rQixZQUFZLEVBQUUsR0FBRyxNQUFNekIsU0FDbENFLElBQUksQ0FBQyxZQUNMQyxNQUFNLENBQUMseURBQ1B1QixFQUFFLENBQUMsTUFBTVQ7WUFFWFEsQ0FBQUEsZ0JBQWdCLEVBQUUsRUFBRUUsT0FBTyxDQUFDLENBQUNDO2dCQUM1QkwsV0FBVyxDQUFDSyxFQUFFQyxFQUFFLENBQUMsR0FBR0Q7WUFDdEI7UUFDRjtRQUVBLHdCQUF3QjtRQUN4QixNQUFNRSxPQUFPLENBQUN0QixnQkFBZ0IsRUFBRSxFQUFFcEIsR0FBRyxDQUFDLENBQUMyQztZQUNyQyxNQUFNQyxVQUFVVCxXQUFXLENBQUNRLEVBQUVYLFVBQVUsQ0FBQztZQUN6QyxNQUFNYSxjQUFjRCxVQUNoQixDQUFDLEVBQUVBLFFBQVFFLFVBQVUsSUFBSSxHQUFHLENBQUMsRUFBRUYsUUFBUUcsU0FBUyxJQUFJLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLEtBQzdEO1lBQ0osTUFBTUMsWUFBWUwsU0FBU00sY0FBYztZQUN6QyxNQUFNQyxlQUFlUCxTQUFTUSxRQUFRLENBQUMsRUFBRVIsUUFBUVEsS0FBSyxDQUFDLENBQUMsRUFBRVIsUUFBUVMsT0FBTyxJQUFJLElBQUksQ0FBQyxHQUFHO1lBRXJGLE9BQU87Z0JBQ0xaLElBQUlFLEVBQUVGLEVBQUU7Z0JBQ1JULFlBQVlXLEVBQUVYLFVBQVU7Z0JBQ3hCYTtnQkFDQUk7Z0JBQ0FFO2dCQUNBRyxnQkFBZ0JYLEVBQUVXLGNBQWM7Z0JBQ2hDQyxjQUFjWixFQUFFWSxZQUFZLElBQUk7Z0JBQ2hDQyxTQUFTYixFQUFFYSxPQUFPLElBQUk7Z0JBQ3RCQyxRQUFRZCxFQUFFYyxNQUFNLElBQUk7Z0JBQ3BCQyxRQUFRekQsT0FBTzBDLEVBQUVlLE1BQU07Z0JBQ3ZCQyxhQUNFaEIsRUFBRWdCLFdBQVcsS0FBSyxRQUFRaEIsRUFBRWdCLFdBQVcsS0FBS3BFLFlBQ3hDVSxPQUFPMEMsRUFBRWdCLFdBQVcsSUFDcEJwRTtnQkFDTnFFLFVBQVVqQixFQUFFaUIsUUFBUTtnQkFDcEJDLFNBQVNsQixFQUFFa0IsT0FBTztnQkFDbEJDLFNBQVNuQixFQUFFbUIsT0FBTyxJQUFJO2dCQUN0QkMsZ0JBQWdCcEIsRUFBRW9CLGNBQWMsSUFBSTtnQkFDcENDLFlBQVlyQixFQUFFcUIsVUFBVSxJQUFJO2dCQUM1QnBDLFFBQVFlLEVBQUVmLE1BQU0sSUFBSTtnQkFDcEJxQyxNQUFNdEIsRUFBRXNCLElBQUksSUFBSTtnQkFDaEJDLGNBQWN2QixFQUFFdUIsWUFBWSxJQUFJO2dCQUNoQ0MsUUFBUSxPQUFPeEIsRUFBRXdCLE1BQU0sS0FBSyxZQUFZeEIsRUFBRXdCLE1BQU0sR0FBRzVFO2dCQUNuRDZFLFFBQVEsT0FBT3pCLEVBQUV5QixNQUFNLEtBQUssWUFBWXpCLEVBQUV5QixNQUFNLEdBQUc3RTtZQUNyRDtRQUNGO1FBRUEsT0FBT1QscURBQVlBLENBQUMyQyxJQUFJLENBQUM7WUFBRUMsU0FBUztZQUFNUCxNQUFNdUI7UUFBSyxHQUFHO1lBQUVkLFFBQVE7UUFBSTtJQUN4RSxFQUFFLE9BQU95QyxHQUFRO1FBQ2YsT0FBT3ZGLHFEQUFZQSxDQUFDMkMsSUFBSSxDQUFDO1lBQUVDLFNBQVM7WUFBT0wsT0FBT2dELEVBQUUxQyxPQUFPO1FBQUMsR0FBRztZQUFFQyxRQUFRO1FBQUk7SUFDL0U7QUFDRjtBQUVBLHlCQUF5QjtBQUN6Qix5REFBeUQ7QUFDbEQsZUFBZTBDLEtBQUtuRixHQUFnQjtJQUN6QyxJQUFJO1FBQ0YsTUFBTW9GLE9BQU8sTUFBTXBGLElBQUlzQyxJQUFJO1FBQzNCLE1BQU1kLGNBQWN6QiwwQkFBMEJDO1FBQzlDLE1BQU15QixXQUFXRCxjQUNiNUIsMkVBQXFCQSxDQUFDNEIsZUFDdEIzQiwwRUFBb0JBO1FBQ3hCLElBQUksQ0FBQ3VGLE1BQU12QyxjQUFjLENBQUN1QyxNQUFNakIsa0JBQWtCaUIsS0FBS2IsTUFBTSxLQUFLbkUsV0FBVztZQUMzRSxPQUFPVCxxREFBWUEsQ0FBQzJDLElBQUksQ0FBQztnQkFBRUMsU0FBUztnQkFBT0wsT0FBTztZQUErQyxHQUFHO2dCQUFFTyxRQUFRO1lBQUk7UUFDcEg7UUFDQSxNQUFNNEMsVUFBVTtZQUNkeEMsWUFBWXVDLEtBQUt2QyxVQUFVO1lBQzNCc0IsZ0JBQWdCckQsT0FBT3NFLEtBQUtqQixjQUFjO1lBQzFDSSxRQUFRekQsT0FBT3NFLEtBQUtiLE1BQU07WUFDMUJFLFVBQVVXLEtBQUtYLFFBQVEsSUFBSTtZQUMzQkMsU0FBUztZQUNURyxZQUFZO1FBQ2Q7UUFDQSxNQUFNLEVBQUU3QyxJQUFJLEVBQUVFLEtBQUssRUFBRSxHQUFHLE1BQU0sU0FDM0JQLElBQUksQ0FBQyx3QkFDTDJELE1BQU0sQ0FBQztZQUFDRDtTQUFRLEVBQ2hCekQsTUFBTSxDQUFDLHFGQUNQMkQsTUFBTTtRQUNULElBQUlyRCxPQUFPLE9BQU92QyxxREFBWUEsQ0FBQzJDLElBQUksQ0FBQztZQUFFQyxTQUFTO1lBQU9MLE9BQU9BLE1BQU1NLE9BQU87UUFBQyxHQUFHO1lBQUVDLFFBQVE7UUFBSTtRQUM1RixPQUFPOUMscURBQVlBLENBQUMyQyxJQUFJLENBQUM7WUFBRUMsU0FBUztZQUFNUDtRQUFLLEdBQUc7WUFBRVMsUUFBUTtRQUFJO0lBQ2xFLEVBQUUsT0FBT3lDLEdBQVE7UUFDZixPQUFPdkYscURBQVlBLENBQUMyQyxJQUFJLENBQUM7WUFBRUMsU0FBUztZQUFPTCxPQUFPZ0QsRUFBRTFDLE9BQU87UUFBQyxHQUFHO1lBQUVDLFFBQVE7UUFBSTtJQUMvRTtBQUNGO0FBRUEsMEJBQTBCO0FBQzFCLGlFQUFpRTtBQUMxRCxlQUFlK0MsTUFBTXhGLEdBQWdCO0lBQzFDLElBQUk7UUFDRixNQUFNb0YsT0FBTyxNQUFNcEYsSUFBSXNDLElBQUk7UUFDM0IsTUFBTWQsY0FBY3pCLDBCQUEwQkM7UUFDOUMsTUFBTXlCLFdBQVdELGNBQ2I1QiwyRUFBcUJBLENBQUM0QixlQUN0QjNCLDBFQUFvQkE7UUFDeEIsSUFBSSxDQUFDdUYsTUFBTTlCLElBQUksT0FBTzNELHFEQUFZQSxDQUFDMkMsSUFBSSxDQUFDO1lBQUVDLFNBQVM7WUFBT0wsT0FBTztRQUFhLEdBQUc7WUFBRU8sUUFBUTtRQUFJO1FBRS9GLE1BQU1nRCxTQUFjLENBQUM7UUFDckIsSUFBSSxPQUFPTCxLQUFLVixPQUFPLEtBQUssV0FBV2UsT0FBT2YsT0FBTyxHQUFHVSxLQUFLVixPQUFPO1FBQ3BFLElBQUlVLEtBQUtQLFVBQVUsS0FBS3pFLFdBQVdxRixPQUFPWixVQUFVLEdBQUdPLEtBQUtQLFVBQVU7UUFDdEUsSUFBSU8sS0FBS1QsT0FBTyxLQUFLdkUsV0FBV3FGLE9BQU9kLE9BQU8sR0FBR1MsS0FBS1QsT0FBTztRQUM3RCxJQUFJUyxLQUFLUixjQUFjLEtBQUt4RSxXQUFXcUYsT0FBT2IsY0FBYyxHQUFHUSxLQUFLUixjQUFjO1FBQ2xGLElBQUlRLEtBQUtaLFdBQVcsS0FBS3BFLFdBQVdxRixPQUFPakIsV0FBVyxHQUFHWSxLQUFLWixXQUFXO1FBRXpFLE1BQU0sRUFBRXhDLElBQUksRUFBRUUsS0FBSyxFQUFFLEdBQUcsTUFBTSxTQUMzQlAsSUFBSSxDQUFDLHdCQUNMOEQsTUFBTSxDQUFDQSxRQUNQNUQsRUFBRSxDQUFDLE1BQU11RCxLQUFLOUIsRUFBRSxFQUNoQjFCLE1BQU0sQ0FBQyw4R0FDUDJELE1BQU07UUFDVCxJQUFJckQsT0FBTyxPQUFPdkMscURBQVlBLENBQUMyQyxJQUFJLENBQUM7WUFBRUMsU0FBUztZQUFPTCxPQUFPQSxNQUFNTSxPQUFPO1FBQUMsR0FBRztZQUFFQyxRQUFRO1FBQUk7UUFDNUYsT0FBTzlDLHFEQUFZQSxDQUFDMkMsSUFBSSxDQUFDO1lBQUVDLFNBQVM7WUFBTVA7UUFBSyxHQUFHO1lBQUVTLFFBQVE7UUFBSTtJQUNsRSxFQUFFLE9BQU95QyxHQUFRO1FBQ2YsT0FBT3ZGLHFEQUFZQSxDQUFDMkMsSUFBSSxDQUFDO1lBQUVDLFNBQVM7WUFBT0wsT0FBT2dELEVBQUUxQyxPQUFPO1FBQUMsR0FBRztZQUFFQyxRQUFRO1FBQUk7SUFDL0U7QUFDRjtBQUVBLG1DQUFtQztBQUM1QixlQUFlaUQsT0FBTzFGLEdBQWdCO0lBQzNDLElBQUk7UUFDRixNQUFNd0IsY0FBY3pCLDBCQUEwQkM7UUFDOUMsTUFBTXlCLFdBQVdELGNBQ2I1QiwyRUFBcUJBLENBQUM0QixlQUN0QjNCLDBFQUFvQkE7UUFDeEIsTUFBTXlCLE1BQU0sSUFBSUQsSUFBSXJCLElBQUlzQixHQUFHO1FBQzNCLE1BQU1xRSxVQUFVckUsSUFBSUYsWUFBWSxDQUFDakIsR0FBRyxDQUFDO1FBQ3JDLElBQUltRCxLQUFLcUM7UUFDVCxJQUFJLENBQUNyQyxJQUFJO1lBQ1AsSUFBSTtnQkFDRixNQUFNOEIsT0FBTyxNQUFNcEYsSUFBSXNDLElBQUk7Z0JBQzNCZ0IsS0FBSzhCLE1BQU05QjtZQUNiLEVBQUUsT0FBTSxDQUFDO1FBQ1g7UUFDQSxJQUFJLENBQUNBLElBQUk7WUFDUCxPQUFPM0QscURBQVlBLENBQUMyQyxJQUFJLENBQUM7Z0JBQUVDLFNBQVM7Z0JBQU9MLE9BQU87WUFBZ0IsR0FBRztnQkFBRU8sUUFBUTtZQUFJO1FBQ3JGO1FBQ0EsTUFBTSxFQUFFUCxLQUFLLEVBQUUsR0FBRyxNQUFNVCxTQUFTRSxJQUFJLENBQUMsd0JBQXdCaUUsTUFBTSxHQUFHL0QsRUFBRSxDQUFDLE1BQU15QjtRQUNoRixJQUFJcEIsT0FBTyxPQUFPdkMscURBQVlBLENBQUMyQyxJQUFJLENBQUM7WUFBRUMsU0FBUztZQUFPTCxPQUFPQSxNQUFNTSxPQUFPO1FBQUMsR0FBRztZQUFFQyxRQUFRO1FBQUk7UUFDNUYsT0FBTzlDLHFEQUFZQSxDQUFDMkMsSUFBSSxDQUFDO1lBQUVDLFNBQVM7UUFBSyxHQUFHO1lBQUVFLFFBQVE7UUFBSTtJQUM1RCxFQUFFLE9BQU95QyxHQUFRO1FBQ2YsT0FBT3ZGLHFEQUFZQSxDQUFDMkMsSUFBSSxDQUFDO1lBQUVDLFNBQVM7WUFBT0wsT0FBT2dELEVBQUUxQyxPQUFPO1FBQUMsR0FBRztZQUFFQyxRQUFRO1FBQUk7SUFDL0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2FrYWRlbWlodWIvLi9hcHAvYXBpL2luc3RhbGxtZW50cy9yb3V0ZS50cz8wZjVkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXF1ZXN0LCBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcic7XG5pbXBvcnQgeyBjcmVhdGVSbHNTZXJ2ZXJDbGllbnQsIGdldFNlcnZpY2VSb2xlQ2xpZW50IH0gZnJvbSAnQC9saWIvc3VwYWJhc2Uvc2VydmVyJztcblxuZXhwb3J0IGNvbnN0IHJ1bnRpbWUgPSAnbm9kZWpzJztcblxuY29uc3QgZ2V0QWNjZXNzVG9rZW5Gcm9tUmVxdWVzdCA9IChyZXE6IE5leHRSZXF1ZXN0KTogc3RyaW5nIHwgdW5kZWZpbmVkID0+IHtcbiAgY29uc3QgYXV0aCA9IHJlcS5oZWFkZXJzLmdldCgnYXV0aG9yaXphdGlvbicpIHx8IHJlcS5oZWFkZXJzLmdldCgnQXV0aG9yaXphdGlvbicpO1xuICBpZiAoIWF1dGgpIHJldHVybiB1bmRlZmluZWQ7XG4gIGNvbnN0IFtzY2hlbWUsIHRva2VuXSA9IGF1dGguc3BsaXQoJyAnKTtcbiAgaWYgKCFzY2hlbWUgfHwgIXRva2VuIHx8IHNjaGVtZS50b0xvd2VyQ2FzZSgpICE9PSAnYmVhcmVyJykgcmV0dXJuIHVuZGVmaW5lZDtcbiAgcmV0dXJuIHRva2VuO1xufTtcblxuLyoqXG4gKiBBa2FkZW1payB5xLFsxLFuIGJhxZ9sYW5nxLHDpyB2ZSBiaXRpxZ8gdGFyaWhsZXJpbmkgaGVzYXBsYVxuICogw5ZybjogXCIyMDI0LTIwMjVcIiDihpIgeyBzdGFydDogXCIyMDI0LTA5LTAxXCIsIGVuZDogXCIyMDI1LTA4LTMxXCIgfVxuICovXG5mdW5jdGlvbiBnZXRBY2FkZW1pY1llYXJEYXRlcyhhY2FkZW1pY1llYXI6IHN0cmluZykge1xuICBjb25zdCBbc3RhcnRZZWFyLCBlbmRZZWFyXSA9IGFjYWRlbWljWWVhci5zcGxpdCgnLScpLm1hcChOdW1iZXIpO1xuICBjb25zdCBzdGFydCA9IG5ldyBEYXRlKHN0YXJ0WWVhciwgOCwgMSwgMCwgMCwgMCk7IC8vIEV5bMO8bCAxXG4gIGNvbnN0IGVuZCA9IG5ldyBEYXRlKGVuZFllYXIsIDcsIDMxLCAyMywgNTksIDU5KTsgLy8gQcSfdXN0b3MgMzFcbiAgcmV0dXJuIHsgc3RhcnQ6IHN0YXJ0LnRvSVNPU3RyaW5nKCksIGVuZDogZW5kLnRvSVNPU3RyaW5nKCkgfTtcbn1cblxuLy8gR0VUIC9hcGkvaW5zdGFsbG1lbnRzP3N0dWRlbnRJZD1VVUlEJmFjYWRlbWljWWVhcj0yMDI0LTIwMjVcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBHRVQocmVxOiBOZXh0UmVxdWVzdCkge1xuICB0cnkge1xuICAgIGNvbnN0IHsgc2VhcmNoUGFyYW1zIH0gPSBuZXcgVVJMKHJlcS51cmwpO1xuICAgIGNvbnN0IHN0dWRlbnRJZCA9IHNlYXJjaFBhcmFtcy5nZXQoJ3N0dWRlbnRJZCcpO1xuICAgIGNvbnN0IGFjYWRlbWljWWVhciA9IHNlYXJjaFBhcmFtcy5nZXQoJ2FjYWRlbWljWWVhcicpO1xuICAgIGNvbnN0IGFjY2Vzc1Rva2VuID0gZ2V0QWNjZXNzVG9rZW5Gcm9tUmVxdWVzdChyZXEpO1xuICAgIGNvbnN0IHN1cGFiYXNlID0gYWNjZXNzVG9rZW5cbiAgICAgID8gY3JlYXRlUmxzU2VydmVyQ2xpZW50KGFjY2Vzc1Rva2VuKVxuICAgICAgOiBnZXRTZXJ2aWNlUm9sZUNsaWVudCgpO1xuICAgIFxuICAgIC8vIDEuIFRha3NpdGxlcmkgw6dla1xuICAgIGxldCBxID0gc3VwYWJhc2VcbiAgICAgIC5mcm9tKCdmaW5hbmNlX2luc3RhbGxtZW50cycpXG4gICAgICAuc2VsZWN0KCcqJyk7XG4gICAgaWYgKHN0dWRlbnRJZCkgcSA9IHEuZXEoJ3N0dWRlbnRfaWQnLCBzdHVkZW50SWQpO1xuICAgIFxuICAgIC8vIEFrYWRlbWlrIHnEsWwgZmlsdHJlc2lcbiAgICBpZiAoYWNhZGVtaWNZZWFyKSB7XG4gICAgICBjb25zdCB7IHN0YXJ0LCBlbmQgfSA9IGdldEFjYWRlbWljWWVhckRhdGVzKGFjYWRlbWljWWVhcik7XG4gICAgICBxID0gcS5ndGUoJ2R1ZV9kYXRlJywgc3RhcnQpLmx0ZSgnZHVlX2RhdGUnLCBlbmQpO1xuICAgIH1cbiAgICBcbiAgICBjb25zdCB7IGRhdGE6IGluc3RhbGxtZW50cywgZXJyb3I6IGluc3RFcnJvciB9ID0gYXdhaXQgcS5vcmRlcignZHVlX2RhdGUnLCB7IGFzY2VuZGluZzogdHJ1ZSB9KTtcbiAgICBpZiAoaW5zdEVycm9yKSByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGluc3RFcnJvci5tZXNzYWdlIH0sIHsgc3RhdHVzOiA1MDAgfSk7XG5cbiAgICAvLyAyLiDDlsSfcmVuY2kgYmlsZ2lsZXJpbmkgYXlyxLEgw6dla1xuICAgIGNvbnN0IHN0dWRlbnRJZHMgPSBbLi4ubmV3IFNldCgoaW5zdGFsbG1lbnRzIHx8IFtdKS5tYXAoKGk6IGFueSkgPT4gaS5zdHVkZW50X2lkKS5maWx0ZXIoQm9vbGVhbikpXTtcbiAgICBcbiAgICBsZXQgc3R1ZGVudHNNYXA6IFJlY29yZDxzdHJpbmcsIGFueT4gPSB7fTtcbiAgICBpZiAoc3R1ZGVudElkcy5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zdCB7IGRhdGE6IHN0dWRlbnRzRGF0YSB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgICAgLmZyb20oJ3N0dWRlbnRzJylcbiAgICAgICAgLnNlbGVjdCgnaWQsIGZpcnN0X25hbWUsIGxhc3RfbmFtZSwgc3R1ZGVudF9ubywgY2xhc3MsIHNlY3Rpb24nKVxuICAgICAgICAuaW4oJ2lkJywgc3R1ZGVudElkcyk7XG4gICAgICBcbiAgICAgIChzdHVkZW50c0RhdGEgfHwgW10pLmZvckVhY2goKHM6IGFueSkgPT4ge1xuICAgICAgICBzdHVkZW50c01hcFtzLmlkXSA9IHM7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyAzLiBWZXJpbGVyaSBiaXJsZcWfdGlyXG4gICAgY29uc3QgbGlzdCA9IChpbnN0YWxsbWVudHMgfHwgW10pLm1hcCgocjogYW55KSA9PiB7XG4gICAgICBjb25zdCBzdHVkZW50ID0gc3R1ZGVudHNNYXBbci5zdHVkZW50X2lkXTtcbiAgICAgIGNvbnN0IHN0dWRlbnROYW1lID0gc3R1ZGVudCBcbiAgICAgICAgPyBgJHtzdHVkZW50LmZpcnN0X25hbWUgfHwgJyd9ICR7c3R1ZGVudC5sYXN0X25hbWUgfHwgJyd9YC50cmltKCkgXG4gICAgICAgIDogbnVsbDtcbiAgICAgIGNvbnN0IHN0dWRlbnRObyA9IHN0dWRlbnQ/LnN0dWRlbnRfbm8gfHwgbnVsbDtcbiAgICAgIGNvbnN0IHN0dWRlbnRDbGFzcyA9IHN0dWRlbnQ/LmNsYXNzID8gYCR7c3R1ZGVudC5jbGFzc30tJHtzdHVkZW50LnNlY3Rpb24gfHwgJ0EnfWAgOiBudWxsO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBpZDogci5pZCxcbiAgICAgICAgc3R1ZGVudF9pZDogci5zdHVkZW50X2lkLFxuICAgICAgICBzdHVkZW50TmFtZSxcbiAgICAgICAgc3R1ZGVudE5vLFxuICAgICAgICBzdHVkZW50Q2xhc3MsXG4gICAgICAgIGluc3RhbGxtZW50X25vOiByLmluc3RhbGxtZW50X25vLFxuICAgICAgICBhZ3JlZW1lbnRfaWQ6IHIuYWdyZWVtZW50X2lkIHx8IG51bGwsXG4gICAgICAgIHNhbGVfaWQ6IHIuc2FsZV9pZCB8fCBudWxsLFxuICAgICAgICBzb3VyY2U6IHIuc291cmNlIHx8ICdlZHVjYXRpb24nLFxuICAgICAgICBhbW91bnQ6IE51bWJlcihyLmFtb3VudCksXG4gICAgICAgIHBhaWRfYW1vdW50OlxuICAgICAgICAgIHIucGFpZF9hbW91bnQgIT09IG51bGwgJiYgci5wYWlkX2Ftb3VudCAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgICA/IE51bWJlcihyLnBhaWRfYW1vdW50KVxuICAgICAgICAgICAgOiB1bmRlZmluZWQsXG4gICAgICAgIGR1ZV9kYXRlOiByLmR1ZV9kYXRlLFxuICAgICAgICBpc19wYWlkOiByLmlzX3BhaWQsXG4gICAgICAgIHBhaWRfYXQ6IHIucGFpZF9hdCB8fCBudWxsLFxuICAgICAgICBwYXltZW50X21ldGhvZDogci5wYXltZW50X21ldGhvZCB8fCBudWxsLFxuICAgICAgICBwYXltZW50X2lkOiByLnBheW1lbnRfaWQgfHwgbnVsbCxcbiAgICAgICAgc3RhdHVzOiByLnN0YXR1cyB8fCAnYWN0aXZlJyxcbiAgICAgICAgbm90ZTogci5ub3RlIHx8IG51bGwsXG4gICAgICAgIGNvbGxlY3RlZF9ieTogci5jb2xsZWN0ZWRfYnkgfHwgbnVsbCxcbiAgICAgICAgaXNfb2xkOiB0eXBlb2Ygci5pc19vbGQgPT09ICdib29sZWFuJyA/IHIuaXNfb2xkIDogdW5kZWZpbmVkLFxuICAgICAgICBpc19uZXc6IHR5cGVvZiByLmlzX25ldyA9PT0gJ2Jvb2xlYW4nID8gci5pc19uZXcgOiB1bmRlZmluZWQsXG4gICAgICB9O1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogbGlzdCB9LCB7IHN0YXR1czogMjAwIH0pO1xuICB9IGNhdGNoIChlOiBhbnkpIHtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGUubWVzc2FnZSB9LCB7IHN0YXR1czogNTAwIH0pO1xuICB9XG59XG5cbi8vIFBPU1QgL2FwaS9pbnN0YWxsbWVudHNcbi8vIGJvZHk6IHsgc3R1ZGVudF9pZCwgaW5zdGFsbG1lbnRfbm8sIGFtb3VudCwgZHVlX2RhdGUgfVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxOiBOZXh0UmVxdWVzdCkge1xuICB0cnkge1xuICAgIGNvbnN0IGJvZHkgPSBhd2FpdCByZXEuanNvbigpO1xuICAgIGNvbnN0IGFjY2Vzc1Rva2VuID0gZ2V0QWNjZXNzVG9rZW5Gcm9tUmVxdWVzdChyZXEpO1xuICAgIGNvbnN0IHN1cGFiYXNlID0gYWNjZXNzVG9rZW5cbiAgICAgID8gY3JlYXRlUmxzU2VydmVyQ2xpZW50KGFjY2Vzc1Rva2VuKVxuICAgICAgOiBnZXRTZXJ2aWNlUm9sZUNsaWVudCgpO1xuICAgIGlmICghYm9keT8uc3R1ZGVudF9pZCB8fCAhYm9keT8uaW5zdGFsbG1lbnRfbm8gfHwgYm9keS5hbW91bnQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnc3R1ZGVudF9pZCwgaW5zdGFsbG1lbnRfbm8gdmUgYW1vdW50IHpvcnVubHUnIH0sIHsgc3RhdHVzOiA0MDAgfSk7XG4gICAgfVxuICAgIGNvbnN0IHBheWxvYWQgPSB7XG4gICAgICBzdHVkZW50X2lkOiBib2R5LnN0dWRlbnRfaWQsXG4gICAgICBpbnN0YWxsbWVudF9ubzogTnVtYmVyKGJvZHkuaW5zdGFsbG1lbnRfbm8pLFxuICAgICAgYW1vdW50OiBOdW1iZXIoYm9keS5hbW91bnQpLFxuICAgICAgZHVlX2RhdGU6IGJvZHkuZHVlX2RhdGUgfHwgbnVsbCxcbiAgICAgIGlzX3BhaWQ6IGZhbHNlLFxuICAgICAgcGF5bWVudF9pZDogbnVsbCxcbiAgICB9O1xuICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IChzdXBhYmFzZSBhcyBhbnkpXG4gICAgICAuZnJvbSgnZmluYW5jZV9pbnN0YWxsbWVudHMnKVxuICAgICAgLmluc2VydChbcGF5bG9hZF0pXG4gICAgICAuc2VsZWN0KCdpZCwgc3R1ZGVudF9pZCwgaW5zdGFsbG1lbnRfbm8sIGFtb3VudCwgZHVlX2RhdGUsIGlzX3BhaWQsIHBheW1lbnRfaWQsIGNyZWF0ZWRfYXQnKVxuICAgICAgLnNpbmdsZSgpO1xuICAgIGlmIChlcnJvcikgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvci5tZXNzYWdlIH0sIHsgc3RhdHVzOiA1MDAgfSk7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgc3VjY2VzczogdHJ1ZSwgZGF0YSB9LCB7IHN0YXR1czogMjAwIH0pO1xuICB9IGNhdGNoIChlOiBhbnkpIHtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGUubWVzc2FnZSB9LCB7IHN0YXR1czogNTAwIH0pO1xuICB9XG59XG5cbi8vIFBBVENIIC9hcGkvaW5zdGFsbG1lbnRzXG4vLyBib2R5OiB7IGlkLCBpc19wYWlkPywgcGF5bWVudF9pZD8sIHBhaWRfYXQ/LCBwYXltZW50X21ldGhvZD8gfVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBBVENIKHJlcTogTmV4dFJlcXVlc3QpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBib2R5ID0gYXdhaXQgcmVxLmpzb24oKTtcbiAgICBjb25zdCBhY2Nlc3NUb2tlbiA9IGdldEFjY2Vzc1Rva2VuRnJvbVJlcXVlc3QocmVxKTtcbiAgICBjb25zdCBzdXBhYmFzZSA9IGFjY2Vzc1Rva2VuXG4gICAgICA/IGNyZWF0ZVJsc1NlcnZlckNsaWVudChhY2Nlc3NUb2tlbilcbiAgICAgIDogZ2V0U2VydmljZVJvbGVDbGllbnQoKTtcbiAgICBpZiAoIWJvZHk/LmlkKSByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdpZCB6b3J1bmx1JyB9LCB7IHN0YXR1czogNDAwIH0pO1xuICAgIFxuICAgIGNvbnN0IHVwZGF0ZTogYW55ID0ge307XG4gICAgaWYgKHR5cGVvZiBib2R5LmlzX3BhaWQgPT09ICdib29sZWFuJykgdXBkYXRlLmlzX3BhaWQgPSBib2R5LmlzX3BhaWQ7XG4gICAgaWYgKGJvZHkucGF5bWVudF9pZCAhPT0gdW5kZWZpbmVkKSB1cGRhdGUucGF5bWVudF9pZCA9IGJvZHkucGF5bWVudF9pZDtcbiAgICBpZiAoYm9keS5wYWlkX2F0ICE9PSB1bmRlZmluZWQpIHVwZGF0ZS5wYWlkX2F0ID0gYm9keS5wYWlkX2F0O1xuICAgIGlmIChib2R5LnBheW1lbnRfbWV0aG9kICE9PSB1bmRlZmluZWQpIHVwZGF0ZS5wYXltZW50X21ldGhvZCA9IGJvZHkucGF5bWVudF9tZXRob2Q7XG4gICAgaWYgKGJvZHkucGFpZF9hbW91bnQgIT09IHVuZGVmaW5lZCkgdXBkYXRlLnBhaWRfYW1vdW50ID0gYm9keS5wYWlkX2Ftb3VudDtcbiAgICBcbiAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCAoc3VwYWJhc2UgYXMgYW55KVxuICAgICAgLmZyb20oJ2ZpbmFuY2VfaW5zdGFsbG1lbnRzJylcbiAgICAgIC51cGRhdGUodXBkYXRlKVxuICAgICAgLmVxKCdpZCcsIGJvZHkuaWQpXG4gICAgICAuc2VsZWN0KCdpZCwgc3R1ZGVudF9pZCwgaW5zdGFsbG1lbnRfbm8sIGFtb3VudCwgZHVlX2RhdGUsIGlzX3BhaWQsIHBhaWRfYXQsIHBheW1lbnRfaWQsIHBheW1lbnRfbWV0aG9kLCBjcmVhdGVkX2F0JylcbiAgICAgIC5zaW5nbGUoKTtcbiAgICBpZiAoZXJyb3IpIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3IubWVzc2FnZSB9LCB7IHN0YXR1czogNTAwIH0pO1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IHN1Y2Nlc3M6IHRydWUsIGRhdGEgfSwgeyBzdGF0dXM6IDIwMCB9KTtcbiAgfSBjYXRjaCAoZTogYW55KSB7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlLm1lc3NhZ2UgfSwgeyBzdGF0dXM6IDUwMCB9KTtcbiAgfVxufVxuXG4vLyBERUxFVEUgL2FwaS9pbnN0YWxsbWVudHM/aWQ9VVVJRFxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIERFTEVURShyZXE6IE5leHRSZXF1ZXN0KSB7XG4gIHRyeSB7XG4gICAgY29uc3QgYWNjZXNzVG9rZW4gPSBnZXRBY2Nlc3NUb2tlbkZyb21SZXF1ZXN0KHJlcSk7XG4gICAgY29uc3Qgc3VwYWJhc2UgPSBhY2Nlc3NUb2tlblxuICAgICAgPyBjcmVhdGVSbHNTZXJ2ZXJDbGllbnQoYWNjZXNzVG9rZW4pXG4gICAgICA6IGdldFNlcnZpY2VSb2xlQ2xpZW50KCk7XG4gICAgY29uc3QgdXJsID0gbmV3IFVSTChyZXEudXJsKTtcbiAgICBjb25zdCBpZFBhcmFtID0gdXJsLnNlYXJjaFBhcmFtcy5nZXQoJ2lkJyk7XG4gICAgbGV0IGlkID0gaWRQYXJhbTtcbiAgICBpZiAoIWlkKSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBib2R5ID0gYXdhaXQgcmVxLmpzb24oKTtcbiAgICAgICAgaWQgPSBib2R5Py5pZDtcbiAgICAgIH0gY2F0Y2gge31cbiAgICB9XG4gICAgaWYgKCFpZCkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnaWQgem9ydW5sdWR1cicgfSwgeyBzdGF0dXM6IDQwMCB9KTtcbiAgICB9XG4gICAgY29uc3QgeyBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2UuZnJvbSgnZmluYW5jZV9pbnN0YWxsbWVudHMnKS5kZWxldGUoKS5lcSgnaWQnLCBpZCk7XG4gICAgaWYgKGVycm9yKSByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfSwgeyBzdGF0dXM6IDUwMCB9KTtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBzdWNjZXNzOiB0cnVlIH0sIHsgc3RhdHVzOiAyMDAgfSk7XG4gIH0gY2F0Y2ggKGU6IGFueSkge1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZS5tZXNzYWdlIH0sIHsgc3RhdHVzOiA1MDAgfSk7XG4gIH1cbn1cblxuXG4iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwiY3JlYXRlUmxzU2VydmVyQ2xpZW50IiwiZ2V0U2VydmljZVJvbGVDbGllbnQiLCJydW50aW1lIiwiZ2V0QWNjZXNzVG9rZW5Gcm9tUmVxdWVzdCIsInJlcSIsImF1dGgiLCJoZWFkZXJzIiwiZ2V0IiwidW5kZWZpbmVkIiwic2NoZW1lIiwidG9rZW4iLCJzcGxpdCIsInRvTG93ZXJDYXNlIiwiZ2V0QWNhZGVtaWNZZWFyRGF0ZXMiLCJhY2FkZW1pY1llYXIiLCJzdGFydFllYXIiLCJlbmRZZWFyIiwibWFwIiwiTnVtYmVyIiwic3RhcnQiLCJEYXRlIiwiZW5kIiwidG9JU09TdHJpbmciLCJHRVQiLCJzZWFyY2hQYXJhbXMiLCJVUkwiLCJ1cmwiLCJzdHVkZW50SWQiLCJhY2Nlc3NUb2tlbiIsInN1cGFiYXNlIiwicSIsImZyb20iLCJzZWxlY3QiLCJlcSIsImd0ZSIsImx0ZSIsImRhdGEiLCJpbnN0YWxsbWVudHMiLCJlcnJvciIsImluc3RFcnJvciIsIm9yZGVyIiwiYXNjZW5kaW5nIiwianNvbiIsInN1Y2Nlc3MiLCJtZXNzYWdlIiwic3RhdHVzIiwic3R1ZGVudElkcyIsIlNldCIsImkiLCJzdHVkZW50X2lkIiwiZmlsdGVyIiwiQm9vbGVhbiIsInN0dWRlbnRzTWFwIiwibGVuZ3RoIiwic3R1ZGVudHNEYXRhIiwiaW4iLCJmb3JFYWNoIiwicyIsImlkIiwibGlzdCIsInIiLCJzdHVkZW50Iiwic3R1ZGVudE5hbWUiLCJmaXJzdF9uYW1lIiwibGFzdF9uYW1lIiwidHJpbSIsInN0dWRlbnRObyIsInN0dWRlbnRfbm8iLCJzdHVkZW50Q2xhc3MiLCJjbGFzcyIsInNlY3Rpb24iLCJpbnN0YWxsbWVudF9ubyIsImFncmVlbWVudF9pZCIsInNhbGVfaWQiLCJzb3VyY2UiLCJhbW91bnQiLCJwYWlkX2Ftb3VudCIsImR1ZV9kYXRlIiwiaXNfcGFpZCIsInBhaWRfYXQiLCJwYXltZW50X21ldGhvZCIsInBheW1lbnRfaWQiLCJub3RlIiwiY29sbGVjdGVkX2J5IiwiaXNfb2xkIiwiaXNfbmV3IiwiZSIsIlBPU1QiLCJib2R5IiwicGF5bG9hZCIsImluc2VydCIsInNpbmdsZSIsIlBBVENIIiwidXBkYXRlIiwiREVMRVRFIiwiaWRQYXJhbSIsImRlbGV0ZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/api/installments/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/supabase/server.ts":
/*!********************************!*\
  !*** ./lib/supabase/server.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createRlsServerClient: () => (/* binding */ createRlsServerClient),\n/* harmony export */   createServiceRoleClient: () => (/* binding */ createServiceRoleClient),\n/* harmony export */   getServiceRoleClient: () => (/* binding */ getServiceRoleClient)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"(rsc)/./node_modules/@supabase/supabase-js/dist/module/index.js\");\n\n// ============================================================\n// SERVER-SIDE SUPABASE CLIENTLERİ\n// ============================================================\n// NOT:\n// - Service role key **sadece** yönetim/seed senaryolarında kullanılmalıdır.\n// - Uygulama API'leri varsayılan olarak RLS + anon key ile çalışmalıdır.\n// ============================================================\nconst SUPABASE_URL = \"https://vwezzkyuuzyadlntymxc.supabase.co\";\nconst SUPABASE_ANON_KEY = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZ3ZXp6a3l1dXp5YWRsbnR5bXhjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjA2MzcwOTIsImV4cCI6MjA3NjIxMzA5Mn0.NZlAmgCpoDHBeZnNuhwLdF95Zy-VH7gr3HMcXuOi3MM\";\nconst SUPABASE_SERVICE_ROLE_KEY = process.env.SUPABASE_SERVICE_ROLE_KEY;\n// ------------------------------------------------------------\n// 1) RLS UYUMLU CLIENT (Anon key + isteğe bağlı Authorization)\n// ------------------------------------------------------------\nconst createRlsServerClient = (accessToken)=>(0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(SUPABASE_URL, SUPABASE_ANON_KEY, {\n        global: accessToken ? {\n            headers: {\n                Authorization: `Bearer ${accessToken}`\n            }\n        } : {},\n        auth: {\n            autoRefreshToken: false,\n            persistSession: false\n        }\n    });\n// ------------------------------------------------------------\n// 2) SERVICE ROLE CLIENT (sadece seed / bakım scriptleri için)\n// ------------------------------------------------------------\nconst createServiceRoleClient = ()=>(0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(SUPABASE_URL, SUPABASE_SERVICE_ROLE_KEY, {\n        auth: {\n            autoRefreshToken: false,\n            persistSession: false\n        }\n    });\n// Singleton instance (service role)\nlet serviceRoleInstance = null;\nconst getServiceRoleClient = ()=>{\n    if (!serviceRoleInstance) {\n        serviceRoleInstance = createServiceRoleClient();\n    }\n    return serviceRoleInstance;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvc3VwYWJhc2Uvc2VydmVyLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBMEU7QUFFMUUsK0RBQStEO0FBQy9ELGtDQUFrQztBQUNsQywrREFBK0Q7QUFDL0QsT0FBTztBQUNQLDZFQUE2RTtBQUM3RSx5RUFBeUU7QUFDekUsK0RBQStEO0FBRS9ELE1BQU1DLGVBQWVDLDBDQUFvQztBQUN6RCxNQUFNRyxvQkFBb0JILGtOQUF5QztBQUNuRSxNQUFNSyw0QkFBNEJMLFFBQVFDLEdBQUcsQ0FBQ0kseUJBQXlCO0FBRXZFLCtEQUErRDtBQUMvRCwrREFBK0Q7QUFDL0QsK0RBQStEO0FBRXhELE1BQU1DLHdCQUF3QixDQUFDQyxjQUNwQ1QsbUVBQVlBLENBQUNDLGNBQWNJLG1CQUFtQjtRQUM1Q0ssUUFBUUQsY0FDSjtZQUNFRSxTQUFTO2dCQUNQQyxlQUFlLENBQUMsT0FBTyxFQUFFSCxZQUFZLENBQUM7WUFDeEM7UUFDRixJQUNBLENBQUM7UUFDTEksTUFBTTtZQUNKQyxrQkFBa0I7WUFDbEJDLGdCQUFnQjtRQUNsQjtJQUNGLEdBQUc7QUFFTCwrREFBK0Q7QUFDL0QsK0RBQStEO0FBQy9ELCtEQUErRDtBQUV4RCxNQUFNQywwQkFBMEIsSUFDckNoQixtRUFBWUEsQ0FBQ0MsY0FBY00sMkJBQTJCO1FBQ3BETSxNQUFNO1lBQ0pDLGtCQUFrQjtZQUNsQkMsZ0JBQWdCO1FBQ2xCO0lBQ0YsR0FBRztBQUVMLG9DQUFvQztBQUNwQyxJQUFJRSxzQkFBa0Q7QUFFL0MsTUFBTUMsdUJBQXVCO0lBQ2xDLElBQUksQ0FBQ0QscUJBQXFCO1FBQ3hCQSxzQkFBc0JEO0lBQ3hCO0lBQ0EsT0FBT0M7QUFDVCxFQUFFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWthZGVtaWh1Yi8uL2xpYi9zdXBhYmFzZS9zZXJ2ZXIudHM/NjYyNSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVDbGllbnQsIHR5cGUgU3VwYWJhc2VDbGllbnQgfSBmcm9tICdAc3VwYWJhc2Uvc3VwYWJhc2UtanMnO1xuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIFNFUlZFUi1TSURFIFNVUEFCQVNFIENMSUVOVExFUsSwXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIE5PVDpcbi8vIC0gU2VydmljZSByb2xlIGtleSAqKnNhZGVjZSoqIHnDtm5ldGltL3NlZWQgc2VuYXJ5b2xhcsSxbmRhIGt1bGxhbsSxbG1hbMSxZMSxci5cbi8vIC0gVXlndWxhbWEgQVBJJ2xlcmkgdmFyc2F5xLFsYW4gb2xhcmFrIFJMUyArIGFub24ga2V5IGlsZSDDp2FsxLHFn21hbMSxZMSxci5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5jb25zdCBTVVBBQkFTRV9VUkwgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwhO1xuY29uc3QgU1VQQUJBU0VfQU5PTl9LRVkgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWSE7XG5jb25zdCBTVVBBQkFTRV9TRVJWSUNFX1JPTEVfS0VZID0gcHJvY2Vzcy5lbnYuU1VQQUJBU0VfU0VSVklDRV9ST0xFX0tFWSE7XG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gMSkgUkxTIFVZVU1MVSBDTElFTlQgKEFub24ga2V5ICsgaXN0ZcSfZSBiYcSfbMSxIEF1dGhvcml6YXRpb24pXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuZXhwb3J0IGNvbnN0IGNyZWF0ZVJsc1NlcnZlckNsaWVudCA9IChhY2Nlc3NUb2tlbj86IHN0cmluZyk6IFN1cGFiYXNlQ2xpZW50PGFueT4gPT5cbiAgY3JlYXRlQ2xpZW50KFNVUEFCQVNFX1VSTCwgU1VQQUJBU0VfQU5PTl9LRVksIHtcbiAgICBnbG9iYWw6IGFjY2Vzc1Rva2VuXG4gICAgICA/IHtcbiAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7YWNjZXNzVG9rZW59YCxcbiAgICAgICAgICB9LFxuICAgICAgICB9XG4gICAgICA6IHt9LFxuICAgIGF1dGg6IHtcbiAgICAgIGF1dG9SZWZyZXNoVG9rZW46IGZhbHNlLFxuICAgICAgcGVyc2lzdFNlc3Npb246IGZhbHNlLFxuICAgIH0sXG4gIH0pO1xuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIDIpIFNFUlZJQ0UgUk9MRSBDTElFTlQgKHNhZGVjZSBzZWVkIC8gYmFrxLFtIHNjcmlwdGxlcmkgacOnaW4pXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuZXhwb3J0IGNvbnN0IGNyZWF0ZVNlcnZpY2VSb2xlQ2xpZW50ID0gKCk6IFN1cGFiYXNlQ2xpZW50PGFueT4gPT5cbiAgY3JlYXRlQ2xpZW50KFNVUEFCQVNFX1VSTCwgU1VQQUJBU0VfU0VSVklDRV9ST0xFX0tFWSwge1xuICAgIGF1dGg6IHtcbiAgICAgIGF1dG9SZWZyZXNoVG9rZW46IGZhbHNlLFxuICAgICAgcGVyc2lzdFNlc3Npb246IGZhbHNlLFxuICAgIH0sXG4gIH0pO1xuXG4vLyBTaW5nbGV0b24gaW5zdGFuY2UgKHNlcnZpY2Ugcm9sZSlcbmxldCBzZXJ2aWNlUm9sZUluc3RhbmNlOiBTdXBhYmFzZUNsaWVudDxhbnk+IHwgbnVsbCA9IG51bGw7XG5cbmV4cG9ydCBjb25zdCBnZXRTZXJ2aWNlUm9sZUNsaWVudCA9ICgpOiBTdXBhYmFzZUNsaWVudDxhbnk+ID0+IHtcbiAgaWYgKCFzZXJ2aWNlUm9sZUluc3RhbmNlKSB7XG4gICAgc2VydmljZVJvbGVJbnN0YW5jZSA9IGNyZWF0ZVNlcnZpY2VSb2xlQ2xpZW50KCk7XG4gIH1cbiAgcmV0dXJuIHNlcnZpY2VSb2xlSW5zdGFuY2U7XG59O1xuXG5cblxuXG5cblxuXG5cblxuIl0sIm5hbWVzIjpbImNyZWF0ZUNsaWVudCIsIlNVUEFCQVNFX1VSTCIsInByb2Nlc3MiLCJlbnYiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwiLCJTVVBBQkFTRV9BTk9OX0tFWSIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZIiwiU1VQQUJBU0VfU0VSVklDRV9ST0xFX0tFWSIsImNyZWF0ZVJsc1NlcnZlckNsaWVudCIsImFjY2Vzc1Rva2VuIiwiZ2xvYmFsIiwiaGVhZGVycyIsIkF1dGhvcml6YXRpb24iLCJhdXRoIiwiYXV0b1JlZnJlc2hUb2tlbiIsInBlcnNpc3RTZXNzaW9uIiwiY3JlYXRlU2VydmljZVJvbGVDbGllbnQiLCJzZXJ2aWNlUm9sZUluc3RhbmNlIiwiZ2V0U2VydmljZVJvbGVDbGllbnQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/supabase/server.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@supabase","vendor-chunks/tr46","vendor-chunks/whatwg-url","vendor-chunks/webidl-conversions"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Finstallments%2Froute&page=%2Fapi%2Finstallments%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Finstallments%2Froute.ts&appDir=%2FUsers%2Ferdalkiziroglu%2Fyeni%20akdemihubiai%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Ferdalkiziroglu%2Fyeni%20akdemihubiai&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();